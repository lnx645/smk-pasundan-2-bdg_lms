import{q as V,u as B,r as P,c as z,w as H,a as r,o as l,b as S,d as e,e as A,f as g,g as f,v as _,h as a,F as c,i as x,t as u,j as h,n as v,k as D}from"./app-DupgsIkO.js";import{_ as T}from"./breadcrumb.vue_vue_type_script_setup_true_lang-BxmRL-VI.js";const m=n=>({url:m.url(n),method:"post"});m.definition={methods:["post"],url:"/admin/akademik/akademik/plotting"};m.url=n=>m.definition.url+V(n);m.post=n=>({url:m.url(n),method:"post"});Object.assign(m,m);const G={class:"min-h-screen bg-gray-50 py-4"},q={class:"mx-auto max-w-6xl sm:px-6 lg:px-8"},N={class:"overflow-hidden border border-gray-100 bg-white sm:rounded-2xl"},F={class:"border-b border-gray-100 bg-indigo-50/50 p-8"},L={class:"grid grid-cols-1 gap-8 md:grid-cols-2"},O={class:"group relative"},U={class:"relative"},E=["value"],$={class:"relative"},I={class:"mb-2 flex items-center justify-between"},J={key:0,class:"flex items-center gap-2"},K={class:"group relative"},Q=["disabled"],R={value:"",disabled:""},W=["value"],X={key:0,disabled:""},Y={key:0,class:"mt-2 flex animate-pulse items-center gap-2 rounded-md border border-red-100 bg-red-50 p-2 text-xs text-red-600"},Z={key:1,class:"mt-2 flex items-center gap-2 rounded-md border border-orange-100 bg-orange-50 p-2 text-xs text-orange-600"},ee={class:"p-8"},te={key:0,class:"flex flex-col items-center justify-center rounded-xl border-2 border-dashed border-gray-300 py-10 text-gray-500"},se={class:"mb-4 flex items-center justify-between border-b border-gray-100 pb-2"},oe={class:"rounded-full bg-gray-100 px-3 py-1 text-sm font-bold text-gray-700"},ae={class:"flex cursor-pointer items-center space-x-2 text-sm font-medium text-indigo-600 transition select-none hover:text-indigo-800"},re=["onChange"],le={class:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6"},ie=["value"],ne={class:"flex items-center justify-between border-t border-gray-100 bg-gray-50 px-8 py-5"},de={class:"text-sm text-gray-500"},ue={class:"font-bold text-gray-800"},ge=["disabled"],me={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pe={key:1,class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ve={__name:"create",props:{matpels:Array,gurus:Array,kelas_group:Object},setup(n){const k=n,s=B({matpel_kode:"",guru_nip:"",kelas_ids:[]}),d=P(!1),w=z(()=>s.matpel_kode?d.value?k.gurus:k.gurus.filter(b=>b.keahlian_utama_kode==s.matpel_kode):[]);H(()=>s.matpel_kode,()=>{s.guru_nip="",d.value=!1});const y=(b,t)=>{const o=k.kelas_group[b].map(i=>i.id);t?o.forEach(i=>{s.kelas_ids.includes(i)||s.kelas_ids.push(i)}):s.kelas_ids=s.kelas_ids.filter(i=>!o.includes(i))},M=()=>{s.post(m().url,{onSuccess:()=>{s.reset("kelas_ids","matpel_kode","guru_nip"),d.value=!1,alert("Data berhasil disimpan!")}})},j=[{label:"Dashboard"},{label:"Akademik"},{label:"Plotting Jadwal"}];return(b,t)=>(l(),r(c,null,[S(T,{items:j}),e("div",G,[e("div",q,[t[16]||(t[16]=e("div",{class:"mb-6 px-2 sm:px-0"},[e("h2",{class:"text-2xl font-bold text-gray-800"},"Distribusi Mata Pelajaran"),e("p",{class:"text-sm text-gray-500"},"Atur pengajar dan kelas target untuk setiap mata pelajaran.")],-1)),e("div",N,[e("form",{onSubmit:A(M,["prevent"])},[e("div",F,[e("div",L,[e("div",O,[t[5]||(t[5]=e("label",{class:"mb-2 flex items-center gap-2 text-sm font-bold text-gray-700"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})]),g(" Mata Pelajaran ")],-1)),e("div",U,[f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a(s).matpel_kode=o),class:"w-full rounded-xl border-gray-300 bg-white py-3 pr-10 pl-4 text-sm shadow-sm transition-all group-hover:border-indigo-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200",required:""},[t[4]||(t[4]=e("option",{value:"",disabled:""},"-- Pilih Mata Pelajaran --",-1)),(l(!0),r(c,null,x(n.matpels,o=>(l(),r("option",{key:o.kode,value:o.kode},u(o.nama)+" ("+u(o.kode)+")",9,E))),128))],512),[[_,a(s).matpel_kode]])])]),e("div",$,[e("div",I,[t[7]||(t[7]=e("label",{class:"block flex items-center gap-2 text-sm font-bold text-gray-700"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),g(" Guru Pengajar ")],-1)),a(s).matpel_kode?(l(),r("div",J,[t[6]||(t[6]=e("span",{class:"text-xs font-medium text-gray-500"},"Semua Guru",-1)),e("button",{type:"button",onClick:t[1]||(t[1]=o=>d.value=!d.value),class:v(["relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none",d.value?"bg-indigo-600":"bg-gray-200"])},[e("span",{class:v(["inline-block h-3 w-3 transform rounded-full bg-white transition-transform",d.value?"translate-x-5":"translate-x-1"])},null,2)],2)])):h("",!0)]),e("div",K,[f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>a(s).guru_nip=o),class:"w-full rounded-xl border-gray-300 bg-white py-3 pr-10 pl-4 text-sm shadow-sm transition-all group-hover:border-indigo-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 disabled:bg-gray-100 disabled:text-gray-400",required:"",disabled:!a(s).matpel_kode},[e("option",R,u(a(s).matpel_kode?"-- Pilih Guru Pengajar --":"Pilih Mapel Terlebih Dahulu..."),1),(l(!0),r(c,null,x(w.value,o=>(l(),r("option",{key:o.nip,value:o.nip},[g(u(o.nama)+" ",1),o.keahlian_utama?(l(),r(c,{key:0},[g(" ("+u(o.keahlian_utama)+") ",1)],64)):h("",!0),d.value&&o.keahlian_utama_kode!=a(s).matpel_kode&&a(s).matpel_kode?(l(),r(c,{key:1},[g(" [Lintas Minat] ")],64)):h("",!0)],8,W))),128)),a(s).matpel_kode&&w.value.length===0?(l(),r("option",X," (Tidak ada guru dengan spesialisasi ini) ")):h("",!0)],8,Q),[[_,a(s).guru_nip]])]),a(s).matpel_kode&&w.value.length===0&&!d.value?(l(),r("div",Y,t[8]||(t[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),e("span",null,"Tidak ada guru spesialis. Aktifkan toggle di atas untuk melihat semua guru.",-1)]))):h("",!0),d.value?(l(),r("div",Z,t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),e("span",null,"Mode Lintas Minat: Menampilkan seluruh guru.",-1)]))):h("",!0)])])]),e("div",ee,[t[12]||(t[12]=e("h3",{class:"mb-6 flex items-center gap-2 text-lg font-bold text-gray-800"},[e("div",{class:"flex h-8 w-8 items-center justify-center rounded-lg bg-indigo-100 text-indigo-600"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])]),g(" Pilih Kelas Sasaran ")],-1)),Object.keys(n.kelas_group).length===0?(l(),r("div",te,t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mb-2 h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),g(" Belum ada data kelas tersedia. ",-1)]))):h("",!0),(l(!0),r(c,null,x(n.kelas_group,(o,i)=>(l(),r("div",{key:i,class:"mb-8"},[e("div",se,[e("span",oe,"Tingkat "+u(i),1),e("label",ae,[e("input",{type:"checkbox",onChange:p=>y(i,p.target.checked),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 opacity-0 focus:ring-indigo-500"},null,40,re),e("span",null,"Pilih Semua Tingkat "+u(i),1)])]),e("div",le,[(l(!0),r(c,null,x(o,p=>(l(),r("div",{key:p.id},[e("label",{class:v(["relative flex cursor-pointer flex-col items-center justify-center rounded-xl border p-3 text-center shadow-sm transition-all duration-200 select-none hover:shadow-md",a(s).kelas_ids.includes(p.id)?"border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500":"border-gray-200 bg-white hover:border-indigo-300"])},[f(e("input",{type:"checkbox",value:p.id,"onUpdate:modelValue":t[3]||(t[3]=C=>a(s).kelas_ids=C),class:"absolute top-2 right-2 hidden h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,ie),[[D,a(s).kelas_ids]]),(l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",class:v(["mb-2 h-6 w-6",a(s).kelas_ids.includes(p.id)?"text-indigo-600":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)]),2)),e("span",{class:v(["text-sm font-semibold",a(s).kelas_ids.includes(p.id)?"text-indigo-900":"text-gray-700"])},u(p.nama),3)],2)]))),128))])]))),128))]),e("div",ne,[e("div",de,[e("span",ue,u(a(s).kelas_ids.length),1),t[13]||(t[13]=g(" kelas dipilih. ",-1))]),e("button",{type:"submit",disabled:a(s).processing,class:"flex items-center gap-2 rounded-xl bg-indigo-600 px-8 py-3 font-bold text-white shadow-lg shadow-indigo-200 transition-all hover:-translate-y-0.5 hover:bg-indigo-700 hover:shadow-xl disabled:translate-y-0 disabled:cursor-not-allowed disabled:opacity-50 disabled:shadow-none"},[a(s).processing?(l(),r("svg",pe,t[15]||(t[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(l(),r("svg",me,t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),g(" "+u(a(s).processing?"Menyimpan...":"Simpan Distribusi"),1)],8,ge)])],32)])])])],64))}};export{ve as default};
