import{N as B,q as n,m as Y,O as J,u as Z,r as ee,c as te,b as u,o as a,e as t,d as L,L as re,g as F,i as o,P as se,s as E,t as m,n as D,k as K,h as R,v as H,F as ie,j as oe,Q,C as T}from"./app-6R2423CB.js";import{_ as z}from"./input.vue_vue_type_script_setup_true_lang-lZDRTLU2.js";import{_ as le}from"./breadcrumb.vue_vue_type_script_setup_true_lang-DduX5xEt.js";import{A as ne}from"./arrow-left-J-lF9cgP.js";import{R as ae}from"./refresh-cw-DUFVpadF.js";import{S as de}from"./save-BklBu0eK.js";import{U as ue}from"./user-DS_0byUx.js";const g=e=>({url:g.url(e),method:"get"});g.definition={methods:["get","head"],url:"/admin/user-management"};g.url=e=>g.definition.url+n(e);g.get=e=>({url:g.url(e),method:"get"});g.head=e=>({url:g.url(e),method:"head"});const c=e=>({url:c.url(e),method:"get"});c.definition={methods:["get","head"],url:"/admin/user-management/siswa"};c.url=e=>c.definition.url+n(e);c.get=e=>({url:c.url(e),method:"get"});c.head=e=>({url:c.url(e),method:"head"});const f=e=>({url:f.url(e),method:"get"});f.definition={methods:["get","head"],url:"/admin/user-management/tambah"};f.url=e=>f.definition.url+n(e);f.get=e=>({url:f.url(e),method:"get"});f.head=e=>({url:f.url(e),method:"head"});const S=e=>({url:S.url(e),method:"post"});S.definition={methods:["post"],url:"/admin/user-management/tambah"};S.url=e=>S.definition.url+n(e);S.post=e=>({url:S.url(e),method:"post"});const h=(e,r)=>({url:h.url(e,r),method:"get"});h.definition={methods:["get","head"],url:"/admin/user-management/edit-siswa/{id}"};h.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=B(e);const d={id:e.id};return h.definition.url.replace("{id}",d.id.toString()).replace(/\/+$/,"")+n(r)};h.get=(e,r)=>({url:h.url(e,r),method:"get"});h.head=(e,r)=>({url:h.url(e,r),method:"head"});const U=(e,r)=>({url:U.url(e,r),method:"post"});U.definition={methods:["post"],url:"/admin/user-management/edit-siswa/{id}"};U.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=B(e);const d={id:e.id};return U.definition.url.replace("{id}",d.id.toString()).replace(/\/+$/,"")+n(r)};U.post=(e,r)=>({url:U.url(e,r),method:"post"});const O=(e,r)=>({url:O.url(e,r),method:"delete"});O.definition={methods:["delete"],url:"/admin/user-management/delete-siswa/{id}"};O.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=B(e);const d={id:e.id};return O.definition.url.replace("{id}",d.id.toString()).replace(/\/+$/,"")+n(r)};O.delete=(e,r)=>({url:O.url(e,r),method:"delete"});const b=e=>({url:b.url(e),method:"get"});b.definition={methods:["get","head"],url:"/admin/user-management/siswa/template"};b.url=e=>b.definition.url+n(e);b.get=e=>({url:b.url(e),method:"get"});b.head=e=>({url:b.url(e),method:"head"});const P=e=>({url:P.url(e),method:"post"});P.definition={methods:["post"],url:"/admin/user-management/siswa/import"};P.url=e=>P.definition.url+n(e);P.post=e=>({url:P.url(e),method:"post"});const x=e=>({url:x.url(e),method:"get"});x.definition={methods:["get","head"],url:"/admin/user-management/create-user"};x.url=e=>x.definition.url+n(e);x.get=e=>({url:x.url(e),method:"get"});x.head=e=>({url:x.url(e),method:"head"});const y=(e,r)=>({url:y.url(e,r),method:"get"});y.definition={methods:["get","head"],url:"/admin/user-management/edit-user/{id}"};y.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=B(e);const d={id:e.id};return y.definition.url.replace("{id}",d.id.toString()).replace(/\/+$/,"")+n(r)};y.get=(e,r)=>({url:y.url(e,r),method:"get"});y.head=(e,r)=>({url:y.url(e,r),method:"head"});const k=e=>({url:k.url(e),method:"get"});k.definition={methods:["get","head"],url:"/admin/user-management/users"};k.url=e=>k.definition.url+n(e);k.get=e=>({url:k.url(e),method:"get"});k.head=e=>({url:k.url(e),method:"head"});const V=e=>({url:V.url(e),method:"post"});V.definition={methods:["post"],url:"/admin/user-management/users"};V.url=e=>V.definition.url+n(e);V.post=e=>({url:V.url(e),method:"post"});const G=(e,r)=>({url:G.url(e,r),method:"put"});G.definition={methods:["put"],url:"/admin/user-management/users/{id}"};G.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=B(e);const d={id:e.id};return G.definition.url.replace("{id}",d.id.toString()).replace(/\/+$/,"")+n(r)};G.put=(e,r)=>({url:G.url(e,r),method:"put"});const M=(e,r)=>({url:M.url(e,r),method:"delete"});M.definition={methods:["delete"],url:"/admin/user-management/users/{id}"};M.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=B(e);const d={id:e.id};return M.definition.url.replace("{id}",d.id.toString()).replace(/\/+$/,"")+n(r)};M.delete=(e,r)=>({url:M.url(e,r),method:"delete"});const w=e=>({url:w.url(e),method:"get"});w.definition={methods:["get","head"],url:"/admin/user-management/guru"};w.url=e=>w.definition.url+n(e);w.get=e=>({url:w.url(e),method:"get"});w.head=e=>({url:w.url(e),method:"head"});const v=e=>({url:v.url(e),method:"get"});v.definition={methods:["get","head"],url:"/admin/user-management/tambah-guru"};v.url=e=>v.definition.url+n(e);v.get=e=>({url:v.url(e),method:"get"});v.head=e=>({url:v.url(e),method:"head"});const N=e=>({url:N.url(e),method:"post"});N.definition={methods:["post"],url:"/admin/user-management/tambah-guru"};N.url=e=>N.definition.url+n(e);N.post=e=>({url:N.url(e),method:"post"});const $=e=>({url:$.url(e),method:"post"});$.definition={methods:["post"],url:"/admin/user-management/guru-add-matpel"};$.url=e=>$.definition.url+n(e);$.post=e=>({url:$.url(e),method:"post"});const _=(e,r)=>({url:_.url(e,r),method:"get"});_.definition={methods:["get","head"],url:"/admin/user-management/edit-guru/{id}"};_.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=B(e);const d={id:e.id};return _.definition.url.replace("{id}",d.id.toString()).replace(/\/+$/,"")+n(r)};_.get=(e,r)=>({url:_.url(e,r),method:"get"});_.head=(e,r)=>({url:_.url(e,r),method:"head"});const A=(e,r)=>({url:A.url(e,r),method:"post"});A.definition={methods:["post"],url:"/admin/user-management/edit-guru/{id}"};A.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=B(e);const d={id:e.id};return A.definition.url.replace("{id}",d.id.toString()).replace(/\/+$/,"")+n(r)};A.post=(e,r)=>({url:A.url(e,r),method:"post"});const j=e=>({url:j.url(e),method:"get"});j.definition={methods:["get","head"],url:"/admin/user-management/guru/template"};j.url=e=>j.definition.url+n(e);j.get=e=>({url:j.url(e),method:"get"});j.head=e=>({url:j.url(e),method:"head"});const C=e=>({url:C.url(e),method:"post"});C.definition={methods:["post"],url:"/admin/user-management/guru/import"};C.url=e=>C.definition.url+n(e);C.post=e=>({url:C.url(e),method:"post"});Object.assign(g,g),Object.assign(c,c),Object.assign(f,f),Object.assign(S,S),Object.assign(h,h),Object.assign(U,U),Object.assign(O,O),Object.assign(b,b),Object.assign(P,P),Object.assign(x,x),Object.assign(y,y),Object.assign(k,k),Object.assign(V,V),Object.assign(G,G),Object.assign(M,M),Object.assign(w,w),Object.assign(v,v),Object.assign(N,N),Object.assign($,$),Object.assign(_,_),Object.assign(A,A),Object.assign(j,j),Object.assign(C,C);const me={class:"min-h-screen w-full bg-gray-50/50 pb-20 font-sans"},pe={class:"mb-4 flex flex-col gap-4 px-1 sm:flex-row sm:items-center sm:justify-between"},ge={class:"flex gap-3"},ce=["disabled"],fe={class:"grid grid-cols-1 gap-8 p-3 lg:grid-cols-3"},he={class:"space-y-6 lg:col-span-1"},be={class:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm"},xe={class:"flex flex-col items-center justify-center gap-4"},ye=["src"],ke={class:"text-center"},we={key:0,class:"mt-1 text-xs text-red-500"},ve={class:"rounded-xl border border-gray-200 bg-gradient-to-br from-indigo-600 to-indigo-800 p-6 text-white shadow-md"},_e={class:"flex items-center gap-4"},je={class:"relative flex h-12 w-12 shrink-0 items-center justify-center overflow-hidden rounded-full bg-white/20 text-lg font-bold backdrop-blur-sm"},Ae=["src"],Se={key:1},Ue={class:"overflow-hidden"},Oe=["title"],Pe={class:"text-xs text-indigo-200"},Ve={class:"lg:col-span-2"},Ge={class:"rounded-xl border border-gray-200 bg-white shadow-sm"},Me={class:"grid grid-cols-1 gap-x-6 gap-y-6 p-6 md:grid-cols-2"},Ne={class:"md:col-span-1"},$e={key:0,class:"mt-1 text-xs text-red-500"},Ce={class:"md:col-span-1"},Be={key:0,class:"mt-1 text-xs text-red-500"},Le={class:"md:col-span-2"},De={key:0,class:"mt-1 text-xs text-red-500"},Ke={class:"md:col-span-1"},Ie={key:0,class:"mt-1 text-xs text-red-500"},Fe={key:1,class:"mt-1 text-xs text-gray-500 italic"},Re={class:"md:col-span-1"},Te={key:0,class:"mt-1 text-xs text-red-500"},ze={class:"md:col-span-2"},Ee={class:"relative"},qe=["value"],Je={key:0,class:"mt-1 text-xs text-red-500"},He={class:"md:col-span-2"},Qe={class:"flex gap-4"},We={key:0,class:"h-5 w-5 text-indigo-600"},it=Y({__name:"edit",props:{guru:{},matpels:{}},setup(e){const r=e,d=[{label:"Dashboard",href:"/dashboard"},{label:"Manajemen Guru",href:J.guru().url},{label:"Edit Data"}],i=Z({name:r.guru.user?.name||"",nip:r.guru.nip||"",jenis_kelamin:r.guru.jenis_kelamin||"",status:r.guru.status||"aktif",gelar_depan:r.guru.gelar_depan||"",gelar_belakang:r.guru.gelar_belakang||"",matpel_kode:r.guru.matpel_kode||"",foto:null}),I=ee(r.guru.foto_url),W=p=>{const s=p.target;if(s.files&&s.files[0]){const l=s.files[0];if(l.size>2*1024*1024){T.error("Ukuran file maksimal 2MB"),s.value="";return}i.foto=l,I.value=URL.createObjectURL(l)}},X=()=>{i.submit(A({id:r.guru.nip}),{preserveScroll:!0,onSuccess:p=>{T.success(p.props.flash?.success||"Data berhasil diperbarui"),i.foto=null,p.props.guru?.foto_url&&(I.value=p.props.guru.foto_url)},onError:p=>{T.error("Gagal memperbarui data. Periksa inputan Anda."),p.foto&&T.error(p.foto)}})},q=te(()=>{const p=i.gelar_depan?`${i.gelar_depan} `:"",s=i.name||"Nama Guru",l=i.gelar_belakang?`, ${i.gelar_belakang}`:"";return`${p}${s}${l}`});return(p,s)=>(a(),u("div",me,[t("div",pe,[L(le,{items:d}),t("div",ge,[L(o(se),{href:o(J).guru().url,class:"inline-flex items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-gray-200"},{default:re(()=>[L(o(ne),{class:"h-4 w-4"}),s[8]||(s[8]=F(" Kembali ",-1))]),_:1,__:[8]},8,["href"]),t("button",{onClick:X,disabled:o(i).processing,class:"inline-flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm shadow-indigo-200 transition-all hover:bg-indigo-700 hover:shadow-md focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-70"},[o(i).processing?(a(),E(o(ae),{key:0,class:"h-4 w-4 animate-spin"})):(a(),E(o(de),{key:1,class:"h-4 w-4"})),F(" "+m(o(i).processing?"Menyimpan...":"Perbarui Data"),1)],8,ce)])]),t("div",fe,[t("div",he,[t("div",be,[s[11]||(s[11]=t("h3",{class:"mb-4 text-base font-semibold text-gray-900"},"Foto Profil",-1)),t("div",xe,[t("div",{class:D(["relative flex h-40 w-40 items-center justify-center overflow-hidden rounded-full border-2 bg-gray-50 text-gray-400",o(i).errors.foto?"border-red-500":"border-dashed border-gray-300"])},[I.value?(a(),u("img",{key:0,src:I.value,class:"h-full w-full object-cover",alt:"Preview Foto"},null,8,ye)):(a(),E(o(ue),{key:1,class:"h-16 w-16 opacity-50"})),t("input",{type:"file",onInput:W,class:"absolute inset-0 cursor-pointer opacity-0",accept:"image/*"},null,32)],2),t("div",ke,[s[9]||(s[9]=t("p",{class:"text-sm font-medium text-indigo-600"},"Klik untuk mengganti foto",-1)),s[10]||(s[10]=t("p",{class:"mt-1 text-xs text-gray-500"},"Biarkan kosong jika tidak ingin mengubah.",-1)),o(i).errors.foto?(a(),u("p",we,m(o(i).errors.foto),1)):K("",!0)])])]),t("div",ve,[s[12]||(s[12]=t("p",{class:"mb-4 text-xs font-medium tracking-wider text-indigo-200 uppercase"},"Preview Tampilan",-1)),t("div",_e,[t("div",je,[I.value?(a(),u("img",{key:0,src:I.value,class:"h-full w-full object-cover"},null,8,Ae)):(a(),u("span",Se,m(o(i).name?o(i).name.charAt(0).toUpperCase():"G"),1))]),t("div",Ue,[t("h4",{class:"truncate text-sm font-bold",title:q.value},m(q.value),9,Oe),t("p",Pe,m(o(i).nip||"NIP Belum diisi"),1)])])])]),t("div",Ve,[t("div",Ge,[s[27]||(s[27]=t("div",{class:"border-b border-gray-100 px-6 py-4"},[t("h3",{class:"text-base font-semibold text-gray-900"},"Informasi Pribadi"),t("p",{class:"text-sm text-gray-500"},"Perbarui data diri guru.")],-1)),t("div",Me,[t("div",Ne,[s[13]||(s[13]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},"Gelar Depan",-1)),L(z,{modelValue:o(i).gelar_depan,"onUpdate:modelValue":s[0]||(s[0]=l=>o(i).gelar_depan=l),type:"text",placeholder:"Contoh: Dr., Ir."},null,8,["modelValue"]),o(i).errors.gelar_depan?(a(),u("p",$e,m(o(i).errors.gelar_depan),1)):K("",!0)]),t("div",Ce,[s[14]||(s[14]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},"Gelar Belakang",-1)),L(z,{modelValue:o(i).gelar_belakang,"onUpdate:modelValue":s[1]||(s[1]=l=>o(i).gelar_belakang=l),type:"text",placeholder:"Contoh: S.Pd, M.Kom"},null,8,["modelValue"]),o(i).errors.gelar_belakang?(a(),u("p",Be,m(o(i).errors.gelar_belakang),1)):K("",!0)]),t("div",Le,[s[15]||(s[15]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},[F(" Nama Lengkap "),t("span",{class:"text-red-500"},"*")],-1)),L(z,{modelValue:o(i).name,"onUpdate:modelValue":s[2]||(s[2]=l=>o(i).name=l),type:"text",placeholder:"Masukkan nama lengkap tanpa gelar",class:D({"border-red-500 ring-red-200":o(i).errors.name})},null,8,["modelValue","class"]),o(i).errors.name?(a(),u("p",De,m(o(i).errors.name),1)):K("",!0)]),t("div",Ke,[s[16]||(s[16]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},[F(" NIP / NUPTK "),t("span",{class:"text-red-500"},"*")],-1)),L(z,{modelValue:o(i).nip,"onUpdate:modelValue":s[3]||(s[3]=l=>o(i).nip=l),type:"text",placeholder:"Nomor Induk Pegawai",class:D([{"border-red-500 ring-red-200":o(i).errors.nip},"cursor-not-allowed bg-gray-100 opacity-70"]),disabled:"",title:"NIP tidak dapat diubah sembarangan"},null,8,["modelValue","class"]),o(i).errors.nip?(a(),u("p",Ie,m(o(i).errors.nip),1)):(a(),u("p",Fe,"Hubungi admin pusat jika ingin mengubah NIP."))]),t("div",Re,[s[18]||(s[18]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},[F(" Jenis Kelamin "),t("span",{class:"text-red-500"},"*")],-1)),R(t("select",{"onUpdate:modelValue":s[4]||(s[4]=l=>o(i).jenis_kelamin=l),class:D(["w-full rounded-lg border bg-neutral-50 px-3 py-2 text-sm transition-all outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100",o(i).errors.jenis_kelamin?"border-red-500 ring-red-200":"border-neutral-200"])},s[17]||(s[17]=[t("option",{value:"",disabled:""},"Pilih Jenis Kelamin",-1),t("option",{value:"L"},"Laki-laki",-1),t("option",{value:"P"},"Perempuan",-1)]),2),[[H,o(i).jenis_kelamin]]),o(i).errors.jenis_kelamin?(a(),u("p",Te,m(o(i).errors.jenis_kelamin),1)):K("",!0)]),t("div",ze,[s[21]||(s[21]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},[F(" Keahlian Utama / Mata Pelajaran "),t("span",{class:"text-gray-400 text-xs font-normal"},"(Opsional)")],-1)),t("div",Ee,[R(t("select",{"onUpdate:modelValue":s[5]||(s[5]=l=>o(i).matpel_kode=l),class:D(["w-full appearance-none rounded-lg border bg-neutral-50 px-3 py-2 text-sm transition-all outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100",o(i).errors.matpel_kode?"border-red-500 ring-red-200":"border-neutral-200"])},[s[19]||(s[19]=t("option",{value:""},"-- Tidak Memiliki Mapel Khusus --",-1)),(a(!0),u(ie,null,oe(r.matpels,l=>(a(),u("option",{key:l.kode,value:l.kode},m(l.kode)+" - "+m(l.nama),9,qe))),128))],2),[[H,o(i).matpel_kode]]),s[20]||(s[20]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500"},[t("svg",{class:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1))]),o(i).errors.matpel_kode?(a(),u("p",Je,m(o(i).errors.matpel_kode),1)):K("",!0)]),s[26]||(s[26]=t("div",{class:"col-span-full my-2 border-t border-gray-100"},null,-1)),t("div",He,[s[25]||(s[25]=t("label",{class:"mb-3 block text-sm font-medium text-gray-700"},"Status Kepegawaian",-1)),t("div",Qe,[t("label",{class:D(["relative flex w-full cursor-pointer rounded-lg border bg-white p-4 shadow-sm transition-all focus:outline-none md:w-1/2",o(i).status==="aktif"?"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600":"border-gray-300 hover:border-gray-400"])},[R(t("input",{type:"radio",name:"status",value:"aktif","onUpdate:modelValue":s[6]||(s[6]=l=>o(i).status=l),class:"sr-only"},null,512),[[Q,o(i).status]]),s[23]||(s[23]=t("span",{class:"flex flex-1"},[t("span",{class:"flex flex-col"},[t("span",{class:"block text-sm font-medium text-gray-900"},"Aktif Mengajar"),t("span",{class:"mt-1 flex items-center text-xs text-gray-500"},"Guru aktif dan memiliki jadwal.")])],-1)),o(i).status==="aktif"?(a(),u("span",We,s[22]||(s[22]=[t("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5"},[t("circle",{cx:"12",cy:"12",r:"12",fill:"currentColor","fill-opacity":"0.2"}),t("path",{d:"M7 13l3 3 7-7",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):K("",!0)],2),t("label",{class:D(["relative flex w-full cursor-pointer rounded-lg border bg-white p-4 shadow-sm transition-all focus:outline-none md:w-1/2",o(i).status==="nonaktif"?"border-red-500 bg-red-50 ring-1 ring-red-500":"border-gray-300 hover:border-gray-400"])},[R(t("input",{type:"radio",name:"status",value:"nonaktif","onUpdate:modelValue":s[7]||(s[7]=l=>o(i).status=l),class:"sr-only"},null,512),[[Q,o(i).status]]),s[24]||(s[24]=t("span",{class:"flex flex-1"},[t("span",{class:"flex flex-col"},[t("span",{class:"block text-sm font-medium text-gray-900"},"Non-Aktif / Cuti"),t("span",{class:"mt-1 flex items-center text-xs text-gray-500"},"Tidak memiliki akses ke sistem.")])],-1))],2)])])])])])])]))}});export{it as default};
