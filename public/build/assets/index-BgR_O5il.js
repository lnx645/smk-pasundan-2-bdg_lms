import{l as j,c as h,r as b,w as K,z as g,N as p,a as i,o as l,d as e,b as o,g as D,h as a,y as E,K as u,O as _,j as M,F as P,i as T,p as A,t as n,n as B,m as F,A as x}from"./app-CODJwY9m.js";import{_ as I}from"./breadcrumb.vue_vue_type_script_setup_true_lang-DRXf1NZv.js";import{_ as U}from"./modal.vue_vue_type_script_setup_true_lang-6Rkmdroh.js";import{l as V}from"./lodash-T6ORTEl2.js";import{K as L}from"./KenaikanKelasController-C4Ft8zOL.js";import{e as O}from"./avatar.esm-CrPbgK6s.js";import{_ as z}from"./paging.vue_vue_type_script_setup_true_lang-GLJAQ2MJ.js";import{_ as G}from"./import-modal-siswa.vue_vue_type_script_setup_true_lang-D1qT2xzL.js";import{S as H}from"./search-Dex7uZSv.js";import{F as q}from"./upload-Bjx8XqOt.js";import{P as y}from"./plus-Bzjv31u9.js";import{P as J}from"./pencil-BKZpv2Il.js";import{T as Q}from"./trash-2-uNa7Ah-Q.js";import"./x-RL67_zD9.js";import"./download-BXQ6FSCC.js";const R={class:"w-full pb-10"},W={class:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},X={class:"flex flex-col gap-3 px-4 sm:flex-row"},Y={class:"relative"},Z={class:"mx-4 rounded-xl border border-gray-200 bg-white shadow-sm"},ee={class:"w-full text-left text-sm text-gray-500"},se={class:"divide-y divide-gray-100 border-t border-gray-100"},te={class:"px-6 py-4"},ae={class:"flex items-center gap-3"},oe={class:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-full bg-indigo-100 text-xs font-bold text-indigo-700"},re=["alt","src"],le={class:"font-medium text-gray-900"},ie={class:"px-6 py-4"},ne={class:"flex flex-col"},de={class:"text-gray-900"},pe={class:"text-xs text-gray-400"},me={class:"px-6 py-4"},ce={class:"rounded-md bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600"},ge={class:"px-6 py-4 text-center"},ue={class:"px-6 py-4 text-right"},xe={class:"flex justify-end gap-2"},fe=["onClick"],he=["onClick"],be={key:0},Te=j({__name:"index",props:{users:{},filters:{}},setup(w){const m=w,f=h(()=>m.users?.data||[]),v=h(()=>m.users?.links||[]),k=[{label:"Dashboard"},{label:"User Management"}],c=b(m.filters?.search||""),d=b(!1),S={aktif:"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-600/20",lulus:"bg-blue-100 text-blue-700 ring-1 ring-blue-600/20",keluar:"bg-rose-100 text-rose-700 ring-1 ring-rose-600/20",tinggal_kelas:"bg-amber-100 text-amber-700 ring-1 ring-amber-600/20"},C=r=>r.replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase());K(c,V.debounce(r=>{g.get(p.siswa().url,{search:r},{preserveState:!0,preserveScroll:!0,replace:!0})},300));const $=r=>{confirm(`Apakah Anda yakin ingin menghapus siswa ${r.name}?`)&&g.delete(p.destroySiswa({id:r.siswa.nis}).url,{preserveScroll:!0,onSuccess:()=>{x.success("Data siswa berhasil dihapus")},onError:s=>{const t=F();t.props.flash?.error?x.error(t.props.flash.error):x.error("Gagal menghapus data. Siswa mungkin memiliki data terkait.")}})};return(r,s)=>(l(),i("div",R,[e("div",W,[o(I,{items:k}),e("div",X,[e("div",Y,[o(a(H),{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),D(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),type:"text",placeholder:"Cari siswa (Nama/NIS)...",class:"h-10 w-full rounded-lg border border-gray-200 bg-white pr-4 pl-10 text-sm outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 sm:w-64"},null,512),[[E,c.value]])]),e("button",{onClick:s[1]||(s[1]=t=>d.value=!0),class:"flex items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition-colors hover:bg-gray-50"},[o(a(q),{class:"h-4 w-4 text-green-600"}),s[4]||(s[4]=e("span",null,"Import Excel",-1))]),o(a(_),{href:a(L).index(),class:"flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700"},{default:u(()=>[o(a(y),{class:"h-4 w-4"}),s[5]||(s[5]=e("span",null,"Naik Kelas",-1))]),_:1,__:[5]},8,["href"]),o(a(_),{href:a(p).tambahSiswa(),class:"flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700"},{default:u(()=>[o(a(y),{class:"h-4 w-4"}),s[6]||(s[6]=e("span",null,"Tambah Siswa",-1))]),_:1,__:[6]},8,["href"])])]),e("div",Z,[e("table",ee,[s[8]||(s[8]=e("thead",{class:"bg-gray-50 text-xs text-gray-700 uppercase"},[e("tr",null,[e("th",{class:"px-6 py-4 font-semibold"},"Nama Siswa"),e("th",{class:"px-6 py-4 font-semibold"},"NIS / Email"),e("th",{class:"px-6 py-4 font-semibold"},"Kelas"),e("th",{class:"px-6 py-4 text-center font-semibold"},"Status"),e("th",{class:"px-6 py-4 text-right font-semibold"},"Aksi")])],-1)),e("tbody",se,[(l(!0),i(P,null,T(f.value,t=>(l(),i("tr",{key:t.id,class:"hover:bg-gray-50/50"},[e("td",te,[e("div",ae,[e("div",oe,[t.siswa.pas_photo?(l(),i("img",{key:1,alt:t.name,src:`/storage/${t.siswa.pas_photo}`},null,8,re)):(l(),A(a(O),{key:0,name:t.name,alt:""},null,8,["name"]))]),e("div",le,n(t.name),1)])]),e("td",ie,[e("div",ne,[e("span",de,n(t.siswa.nis||"-"),1),e("span",pe,n(t.email),1)])]),e("td",me,[e("span",ce,n(t.kelas?.nama||"-"),1)]),e("td",ge,[e("span",{class:B(["inline-flex items-center rounded-full px-3 py-1 text-xs font-bold shadow-sm transition-all",S[t.siswa.status.toLowerCase()]||"bg-gray-100 text-gray-600"])},n(C(t.siswa.status)),3)]),e("td",ue,[e("div",xe,[e("button",{onClick:N=>a(g).visit(a(p).editSiswa({id:t.siswa.nis}).url),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-indigo-600"},[o(a(J),{class:"h-4 w-4"})],8,fe),e("button",{onClick:N=>$(t),class:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",title:"Hapus Siswa"},[o(a(Q),{class:"h-4 w-4"})],8,he)])])]))),128)),f.value.length===0?(l(),i("tr",be,s[7]||(s[7]=[e("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-400"},"Tidak ada data siswa ditemukan.",-1)]))):M("",!0)])])]),o(z,{class:"px-4",links:v.value},null,8,["links"]),o(U,{isOpen:d.value,onClose:s[3]||(s[3]=t=>d.value=!1)},{default:u(()=>[o(G,{onClose:s[2]||(s[2]=t=>d.value=!1)})]),_:1},8,["isOpen"])]))}});export{Te as default};
