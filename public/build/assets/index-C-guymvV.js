import{m as S,c as g,r as h,w as C,A as u,O as c,b as i,o as r,e as s,d as a,h as $,i as o,z as N,L as _,P as j,k as P,F as A,j as D,s as E,t as n,n as T,p as B,C as x}from"./app-6R2423CB.js";import{_ as F}from"./breadcrumb.vue_vue_type_script_setup_true_lang-DduX5xEt.js";import{e as I}from"./avatar.esm-Bt11miEG.js";import{_ as M}from"./paging.vue_vue_type_script_setup_true_lang-vy6NfKCJ.js";import{_ as V}from"./modal.vue_vue_type_script_setup_true_lang-DWsBOydd.js";import{_ as L}from"./import-modal-siswa.vue_vue_type_script_setup_true_lang-CycQotah.js";import{l as O}from"./lodash-CvLQx7ah.js";import{S as U,T as z}from"./trash-2-CVuvbtt_.js";import{F as G}from"./upload-BWBF1Y02.js";import{P as H}from"./plus-BT25xviA.js";import{P as K}from"./pencil-BzU3Ty20.js";import"./x-BxVaUl50.js";import"./download-Cz3PQfCg.js";const q={class:"w-full pb-10"},J={class:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Q={class:"flex flex-col gap-3 px-4 sm:flex-row"},R={class:"relative"},W={class:"mx-4 rounded-xl border border-gray-200 bg-white shadow-sm"},X={class:"w-full text-left text-sm text-gray-500"},Y={class:"divide-y divide-gray-100 border-t border-gray-100"},Z={class:"px-6 py-4"},ss={class:"flex items-center gap-3"},es={class:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-full bg-indigo-100 text-xs font-bold text-indigo-700"},ts=["alt","src"],as={class:"font-medium text-gray-900"},os={class:"px-6 py-4"},rs={class:"flex flex-col"},ls={class:"text-gray-900"},is={class:"text-xs text-gray-400"},ns={class:"px-6 py-4"},ds={class:"rounded-md bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600"},cs={class:"px-6 py-4 text-center"},ps={class:"px-6 py-4 text-right"},ms={class:"flex justify-end gap-2"},us=["onClick"],xs=["onClick"],fs={key:0},Ps=S({__name:"index",props:{users:{},filters:{}},setup(y){const p=y,f=g(()=>p.users?.data||[]),b=g(()=>p.users?.links||[]),w=[{label:"Dashboard"},{label:"User Management"}],m=h(p.filters?.search||""),d=h(!1);C(m,O.debounce(l=>{u.get(c.siswa().url,{search:l},{preserveState:!0,preserveScroll:!0,replace:!0})},300));const v=l=>{confirm(`Apakah Anda yakin ingin menghapus siswa ${l.name}?`)&&u.delete(c.destroySiswa({id:l.siswa.nis}).url,{preserveScroll:!0,onSuccess:()=>{x.success("Data siswa berhasil dihapus")},onError:t=>{const e=B();e.props.flash?.error?x.error(e.props.flash.error):x.error("Gagal menghapus data. Siswa mungkin memiliki data terkait.")}})};return(l,t)=>(r(),i("div",q,[s("div",J,[a(F,{items:w}),s("div",Q,[s("div",R,[a(o(U),{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),$(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),type:"text",placeholder:"Cari siswa (Nama/NIS)...",class:"h-10 w-full rounded-lg border border-gray-200 bg-white pr-4 pl-10 text-sm outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 sm:w-64"},null,512),[[N,m.value]])]),s("button",{onClick:t[1]||(t[1]=e=>d.value=!0),class:"flex items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition-colors hover:bg-gray-50"},[a(o(G),{class:"h-4 w-4 text-green-600"}),t[4]||(t[4]=s("span",null,"Import Excel",-1))]),a(o(j),{href:o(c).tambahSiswa(),class:"flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700"},{default:_(()=>[a(o(H),{class:"h-4 w-4"}),t[5]||(t[5]=s("span",null,"Tambah Siswa",-1))]),_:1,__:[5]},8,["href"])])]),s("div",W,[s("table",X,[t[7]||(t[7]=s("thead",{class:"bg-gray-50 text-xs text-gray-700 uppercase"},[s("tr",null,[s("th",{class:"px-6 py-4 font-semibold"},"Nama Siswa"),s("th",{class:"px-6 py-4 font-semibold"},"NIS / Email"),s("th",{class:"px-6 py-4 font-semibold"},"Kelas"),s("th",{class:"px-6 py-4 text-center font-semibold"},"Status"),s("th",{class:"px-6 py-4 text-right font-semibold"},"Aksi")])],-1)),s("tbody",Y,[(r(!0),i(A,null,D(f.value,e=>(r(),i("tr",{key:e.id,class:"hover:bg-gray-50/50"},[s("td",Z,[s("div",ss,[s("div",es,[e.siswa.pas_photo?(r(),i("img",{key:1,alt:e.name,src:`/storage/${e.siswa.pas_photo}`},null,8,ts)):(r(),E(o(I),{key:0,name:e.name,alt:""},null,8,["name"]))]),s("div",as,n(e.name),1)])]),s("td",os,[s("div",rs,[s("span",ls,n(e.siswa.nis||"-"),1),s("span",is,n(e.email),1)])]),s("td",ns,[s("span",ds,n(e.kelas?.nama||"-"),1)]),s("td",cs,[s("span",{class:T(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",e.siswa.status==="Aktif"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(e.siswa.status),3)]),s("td",ps,[s("div",ms,[s("button",{onClick:k=>o(u).visit(o(c).editSiswa({id:e.siswa.nis}).url),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-indigo-600"},[a(o(K),{class:"h-4 w-4"})],8,us),s("button",{onClick:k=>v(e),class:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",title:"Hapus Siswa"},[a(o(z),{class:"h-4 w-4"})],8,xs)])])]))),128)),f.value.length===0?(r(),i("tr",fs,t[6]||(t[6]=[s("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-400"},"Tidak ada data siswa ditemukan.",-1)]))):P("",!0)])])]),a(M,{class:"px-4",links:b.value},null,8,["links"]),a(V,{isOpen:d.value,onClose:t[3]||(t[3]=e=>d.value=!1)},{default:_(()=>[a(L,{onClose:t[2]||(t[2]=e=>d.value=!1)})]),_:1},8,["isOpen"])]))}});export{Ps as default};
