import{y as _,m as te,r as u,u as U,w as se,c as oe,b as r,o as l,e,k as w,d as n,g as P,i as a,F as j,j as M,n as k,t as i,h as L,z as F,U as D,B as ae,f as I,v as le,s as re,A as T,M as f,C as c}from"./app-6R2423CB.js";import{_ as ne}from"./input.vue_vue_type_script_setup_true_lang-lZDRTLU2.js";import{_ as ie}from"./breadcrumb.vue_vue_type_script_setup_true_lang-DduX5xEt.js";import{l as de}from"./lodash-CvLQx7ah.js";import{P as ue}from"./plus-BT25xviA.js";import{S as ce,T as ge}from"./trash-2-CVuvbtt_.js";import{X as E}from"./x-BxVaUl50.js";/**
 * @license lucide-vue-next v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=_("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=_("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-vue-next v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=_("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=_("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=_("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ve={class:"min-h-screen w-full bg-gray-50/50 pb-20 font-sans"},ye={class:"mb-8 flex flex-col justify-between gap-4 px-1 sm:flex-row sm:items-end"},he={class:"mb-8 flex flex-col gap-4 px-4 lg:flex-row lg:items-center lg:justify-between"},we={class:"flex overflow-x-auto rounded-lg bg-white p-1 shadow-sm ring-1 ring-gray-200 lg:w-fit"},ke=["onClick"],_e={class:"relative w-full lg:w-72"},Ce={key:0,class:"grid grid-cols-1 gap-6 px-4 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3"},Se={class:"p-5"},je={class:"mb-4"},Me={class:"text-lg font-bold text-gray-900 group-hover:text-indigo-600"},$e={class:"grid grid-cols-2 gap-3"},Ke=["onClick"],Be={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-white text-indigo-600 shadow-sm"},Le={class:"font-bold text-gray-900"},Te={class:"flex items-center gap-3 rounded-xl bg-gray-50 p-3"},Ee={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-white text-orange-600 shadow-sm"},Ve={class:"font-bold text-gray-900"},ze={class:"mt-auto border-t border-gray-100 bg-gray-50/50 px-5 py-3"},Ne={class:"flex gap-2"},Ue=["onClick"],Pe=["onClick"],Fe=["onClick"],De={key:1,class:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-gray-200 bg-gray-50/50 px-4 py-20 text-center"},Ie={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/50 p-4 backdrop-blur-sm"},qe={class:"w-full max-w-md rounded-2xl bg-white shadow-xl"},Ae={class:"flex justify-between border-b border-gray-100 px-6 py-4"},Ge={class:"font-bold text-gray-900"},He={class:"flex justify-end gap-3 pt-2"},Oe={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/50 p-4 backdrop-blur-sm"},Xe={class:"w-full max-w-md overflow-hidden rounded-2xl bg-white shadow-xl"},Re={class:"flex justify-between border-b border-gray-100 bg-gray-50 px-6 py-4"},Je={class:"text-xs text-gray-500"},Qe={class:"border-b border-gray-100 p-4"},We={class:"flex-1 overflow-y-auto p-2"},Ye={key:0,class:"py-10 text-center text-sm text-gray-400"},Ze=["onClick"],et={class:"flex items-center gap-3"},tt={class:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-200 text-xs font-bold"},st={class:"text-sm font-medium"},ot={class:"text-xs text-gray-500"},at={class:"flex justify-end gap-2 border-t border-gray-100 bg-gray-50 p-4"},lt={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/50 p-4 backdrop-blur-sm"},rt={class:"w-full max-w-md overflow-hidden rounded-2xl bg-white shadow-xl"},nt={class:"flex items-center justify-between border-b border-gray-100 bg-gray-50 px-6 py-4"},it={class:"text-xs text-gray-500"},dt={class:"flex h-[500px] flex-col"},ut={class:"flex-1 overflow-y-auto p-4"},ct={key:0,class:"flex h-full flex-col items-center justify-center text-gray-400"},gt={key:1,class:"space-y-2"},pt={class:"flex items-center gap-3"},xt={class:"flex h-10 w-10 items-center justify-center rounded-full bg-indigo-100 text-sm font-bold text-indigo-700"},bt={class:"text-sm font-medium text-gray-900"},mt={class:"font-mono text-xs text-gray-500"},ft=["onClick"],vt={class:"border-t border-gray-100 bg-gray-50 px-6 py-4"},jt=te({__name:"index",props:{kelas:{},available_students:{},filters:{}},setup(q){const C=q,A=[{label:"Dashboard",href:"/dashboard"},{label:"Manajemen Kelas"}],S=u(C.filters.search||""),$=u(C.filters.tingkat||"Semua"),G=["Semua","10","11","12"],p=u(!1),v=u(!1),y=u(!1),x=u(!1),K=u(null),V=u(null),b=u(null),h=u(""),d=U({nama:"",tingkat:"10"}),g=U({kelas_id:null,siswa_id:null}),B=()=>{T.get(f.index().url,{search:S.value,tingkat:$.value},{preserveState:!0,preserveScroll:!0,replace:!0})};se(S,de.debounce(()=>B(),300));const H=o=>{$.value=o,B()},O=()=>{x.value=!1,d.reset(),d.clearErrors(),p.value=!0},X=o=>{x.value=!0,K.value=o.id,d.nama=o.nama,d.tingkat=o.tingkat,d.clearErrors(),p.value=!0},R=()=>{const o=x.value&&K.value?f.update({id:K.value}):f.store();d[x.value?"put":"post"](o.url,{onSuccess:()=>{p.value=!1,c.success(x.value?"Kelas diperbarui":"Kelas dibuat")},onError:()=>c.error("Cek inputan Anda")})},J=o=>{if(o.siswa_count>0||o.matpel_count>0)return c.error("Gagal",{description:"Kelas masih memiliki Siswa/Mapel."});confirm(`Hapus kelas ${o.nama}?`)&&T.delete(f.update({id:o.id}).url,{onSuccess:()=>c.success("Kelas dihapus"),onError:t=>c.error(t.message||"Gagal menghapus")})},Q=o=>{g.reset(),h.value="",V.value=o,g.kelas_id=o.id,v.value=!0},z=oe(()=>{if(!h.value)return C.available_students;const o=h.value.toLowerCase();return C.available_students.filter(t=>t.user.name.toLowerCase().includes(o)||t.nis.toLowerCase().includes(o))}),W=o=>{g.siswa_id=o},Y=()=>{if(!g.siswa_id)return c.error("Pilih siswa dulu");g.post(f.storeSiswa().url,{onSuccess:()=>{v.value=!1,c.success("Siswa ditambahkan"),B()},onError:()=>c.error("Gagal menambahkan siswa")})},Z=o=>{b.value=o,y.value=!0},ee=o=>{confirm(`Keluarkan ${o.user.name} dari kelas ini?`)&&T.post(f.removeStudent().url,{siswa_id:o.nis},{onSuccess:()=>{c.success("Siswa dikeluarkan"),y.value=!1},preserveScroll:!0})},N=o=>{const s={10:"emerald",11:"amber",12:"rose"}[String(o)]||"gray";return`bg-${s}-100 text-${s}-700 border-${s}-200`};return(o,t)=>(l(),r("div",ve,[e("div",ye,[n(ie,{items:A}),e("button",{onClick:O,class:"inline-flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-700 active:scale-95"},[n(a(ue),{class:"h-4 w-4"}),t[10]||(t[10]=P()),t[11]||(t[11]=e("span",null,"Buat Kelas Baru",-1))])]),e("div",he,[e("div",we,[(l(),r(j,null,M(G,s=>e("button",{key:s,onClick:m=>H(s),class:k(["rounded-md px-4 py-1.5 text-sm font-medium transition-all",$.value===s?"bg-indigo-50 text-indigo-700 shadow-sm ring-1 ring-indigo-200":"text-gray-500 hover:bg-gray-50"])},i(s==="Semua"?"Semua":`Kelas ${s}`),11,ke)),64))]),e("div",_e,[n(a(ce),{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>S.value=s),type:"text",placeholder:"Cari nama kelas...",class:"h-10 w-full rounded-lg border-0 bg-white pr-4 pl-10 text-sm shadow-sm ring-1 ring-gray-200 focus:ring-2 focus:ring-indigo-600"},null,512),[[F,S.value]])])]),o.kelas.length>0?(l(),r("div",Ce,[(l(!0),r(j,null,M(o.kelas,s=>(l(),r("div",{key:s.id,class:"group relative flex flex-col justify-between overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm transition-all hover:-translate-y-1 hover:shadow-md"},[e("div",{class:k(["h-1.5 w-full",N(s.tingkat).split(" ")[0].replace("bg-","bg-")])},null,2),e("div",Se,[e("div",je,[e("span",{class:k(["mb-2 inline-flex items-center rounded-md border px-2 py-1 text-xs font-bold",N(s.tingkat)])},"Tingkat "+i(s.tingkat),3),e("h3",Me,i(s.nama),1)]),e("div",$e,[e("div",{onClick:m=>Z(s),class:"flex cursor-pointer items-center gap-3 rounded-xl bg-gray-50 p-3 transition-colors hover:bg-indigo-50 hover:ring-1 hover:ring-indigo-200"},[e("div",Be,[n(a(D),{class:"h-4 w-4"})]),e("div",null,[t[12]||(t[12]=e("p",{class:"text-xs font-medium text-gray-500"},"Siswa",-1)),e("p",Le,i(s.siswa_count),1)])],8,Ke),e("div",Te,[e("div",Ee,[n(a(ae),{class:"h-4 w-4"})]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-xs font-medium text-gray-500"},"Mapel",-1)),e("p",Ve,i(s.matpel_count),1)])])])]),e("div",ze,[e("div",Ne,[e("button",{onClick:m=>Q(s),class:"flex items-center justify-center rounded-lg border border-gray-200 bg-white px-3 py-2 text-indigo-600 shadow-sm hover:bg-indigo-50",title:"Tambah Siswa"},[n(a(fe),{class:"h-3.5 w-3.5"})],8,Ue),e("button",{onClick:m=>X(s),class:"flex flex-1 items-center justify-center gap-1.5 rounded-lg border border-gray-200 bg-white py-2 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 hover:text-indigo-600"},[n(a(be),{class:"h-3.5 w-3.5"}),t[14]||(t[14]=P(" Edit ",-1))],8,Pe),e("button",{onClick:m=>J(s),class:k(["flex items-center justify-center rounded-lg border border-gray-200 bg-white px-3 py-2 text-gray-400 shadow-sm hover:bg-red-50 hover:text-red-600",{"cursor-not-allowed opacity-50":s.siswa_count>0||s.matpel_count>0}])},[n(a(ge),{class:"h-3.5 w-3.5"})],10,Fe)])])]))),128))])):(l(),r("div",De,[n(a(xe),{class:"mb-4 h-8 w-8 text-gray-400"}),t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Tidak ada kelas",-1))])),p.value?(l(),r("div",Ie,[e("div",qe,[e("div",Ae,[e("h3",Ge,i(x.value?"Edit Kelas":"Buat Kelas"),1),e("button",{onClick:t[1]||(t[1]=s=>p.value=!1)},[n(a(E),{class:"h-5 w-5 text-gray-400"})])]),e("form",{onSubmit:I(R,["prevent"]),class:"space-y-4 p-6"},[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tingkat",-1)),L(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(d).tingkat=s),class:"w-full rounded-lg border border-neutral-200 bg-neutral-50 px-3 py-2 text-sm transition-all outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100"},t[16]||(t[16]=[e("option",{value:"10"},"Kelas 10",-1),e("option",{value:"11"},"Kelas 11",-1),e("option",{value:"12"},"Kelas 12",-1)]),512),[[le,a(d).tingkat]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nama Kelas",-1)),n(ne,{modelValue:a(d).nama,"onUpdate:modelValue":t[3]||(t[3]=s=>a(d).nama=s),placeholder:"Contoh: X RPL 1"},null,8,["modelValue"])]),e("div",He,[e("button",{type:"button",onClick:t[4]||(t[4]=s=>p.value=!1),class:"rounded-lg border border-gray-100 px-4 py-2 text-sm hover:bg-gray-50"}," Batal "),t[19]||(t[19]=e("button",{type:"submit",class:"rounded-lg bg-indigo-600 px-4 py-2 text-sm text-white hover:bg-indigo-700"},"Simpan",-1))])],32)])])):w("",!0),v.value?(l(),r("div",Oe,[e("div",Xe,[e("div",Re,[e("div",null,[t[20]||(t[20]=e("h3",{class:"font-bold"},"Pilih Siswa",-1)),e("p",Je,"Ke: "+i(V.value?.nama),1)]),e("button",{onClick:t[5]||(t[5]=s=>v.value=!1)},[n(a(E),{class:"h-5 w-5 text-gray-400"})])]),e("form",{onSubmit:I(Y,["prevent"]),class:"flex h-[500px] flex-col"},[e("div",Qe,[L(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>h.value=s),type:"text",placeholder:"Cari Nama/NIS...",class:"w-full rounded-lg border-gray-200 bg-gray-50 px-4 py-2 text-sm"},null,512),[[F,h.value]])]),e("div",We,[z.value.length===0?(l(),r("div",Ye,"Tidak ada siswa")):w("",!0),(l(!0),r(j,null,M(z.value,s=>(l(),r("div",{key:s.nis,onClick:m=>W(s.nis),class:k(["mb-2 flex cursor-pointer items-center justify-between rounded-lg p-3 hover:bg-indigo-50",a(g).siswa_id===s.nis?"bg-indigo-50 ring-1 ring-indigo-500":""])},[e("div",et,[e("div",tt,i(s.user.name[0]),1),e("div",null,[e("p",st,i(s.user.name),1),e("p",ot,i(s.nis),1)])]),a(g).siswa_id===s.nis?(l(),re(a(pe),{key:0,class:"h-5 w-5 text-indigo-600"})):w("",!0)],10,Ze))),128))]),e("div",at,[e("button",{type:"button",onClick:t[7]||(t[7]=s=>v.value=!1),class:"rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm"}," Batal "),t[21]||(t[21]=e("button",{type:"submit",class:"rounded-lg bg-indigo-600 px-4 py-2 text-sm text-white"},"Simpan",-1))])],32)])])):w("",!0),y.value?(l(),r("div",lt,[e("div",rt,[e("div",nt,[e("div",null,[t[22]||(t[22]=e("h3",{class:"font-bold text-gray-900"},"Daftar Siswa",-1)),e("p",it,"Kelas: "+i(b.value?.nama)+" ("+i(b.value?.siswa_count)+" Siswa)",1)]),e("button",{onClick:t[8]||(t[8]=s=>y.value=!1),class:"rounded-lg p-1 text-gray-400 hover:bg-gray-200"},[n(a(E),{class:"h-5 w-5"})])]),e("div",dt,[e("div",ut,[!b.value?.siswa||b.value.siswa.length===0?(l(),r("div",ct,[n(a(D),{class:"mb-2 h-10 w-10 opacity-50"}),t[23]||(t[23]=e("p",{class:"text-sm"},"Belum ada siswa di kelas ini.",-1))])):(l(),r("div",gt,[(l(!0),r(j,null,M(b.value.siswa,s=>(l(),r("div",{key:s.id,class:"flex items-center justify-between rounded-xl border border-gray-100 bg-white p-3 shadow-sm"},[e("div",pt,[e("div",xt,i(s.user.name.charAt(0)),1),e("div",null,[e("p",bt,i(s.user.name),1),e("p",mt,"NIS: "+i(s.nis),1)])]),e("button",{onClick:m=>ee(s),class:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",title:"Keluarkan dari kelas"},[n(a(me),{class:"h-4 w-4"})],8,ft)]))),128))]))]),e("div",vt,[e("button",{onClick:t[9]||(t[9]=s=>y.value=!1),class:"w-full rounded-lg border border-gray-100 bg-white py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"}," Tutup ")])])])])):w("",!0)]))}});export{jt as default};
