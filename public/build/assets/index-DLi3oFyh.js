import{l as $,c as f,r as h,w as N,z as g,N as c,a as i,o as l,d as s,b as a,g as j,h as o,y as D,K as b,O as E,j as M,F as P,i as T,p as A,t as n,n as B,m as F,A as u}from"./app-DupgsIkO.js";import{_ as I}from"./breadcrumb.vue_vue_type_script_setup_true_lang-BxmRL-VI.js";import{_ as U}from"./modal.vue_vue_type_script_setup_true_lang-B6el_bLL.js";import{l as V}from"./lodash-CD5M4qvG.js";import{e as L}from"./avatar.esm-n6tWaDM7.js";import{_ as O}from"./paging.vue_vue_type_script_setup_true_lang-DkLHmKUE.js";import{_ as z}from"./import-modal-siswa.vue_vue_type_script_setup_true_lang-CfNcL7qn.js";import{S as K}from"./search-UgmVSKJ9.js";import{F as G}from"./upload-sraYIZbS.js";import{P as H}from"./plus-D-Sh_IY1.js";import{P as q}from"./pencil-COyhjD7z.js";import{T as J}from"./trash-2-CPyaD0WO.js";import"./x-CfVlFzOp.js";import"./download-CLWZ1NWm.js";const Q={class:"w-full pb-10"},R={class:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},W={class:"flex flex-col gap-3 px-4 sm:flex-row"},X={class:"relative"},Y={class:"mx-4 rounded-xl border border-gray-200 bg-white shadow-sm"},Z={class:"w-full text-left text-sm text-gray-500"},ss={class:"divide-y divide-gray-100 border-t border-gray-100"},es={class:"px-6 py-4"},ts={class:"flex items-center gap-3"},as={class:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-full bg-indigo-100 text-xs font-bold text-indigo-700"},os=["alt","src"],rs={class:"font-medium text-gray-900"},ls={class:"px-6 py-4"},is={class:"flex flex-col"},ns={class:"text-gray-900"},ds={class:"text-xs text-gray-400"},cs={class:"px-6 py-4"},ps={class:"rounded-md bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600"},ms={class:"px-6 py-4 text-center"},gs={class:"px-6 py-4 text-right"},us={class:"flex justify-end gap-2"},xs=["onClick"],fs=["onClick"],hs={key:0},Ps=$({__name:"index",props:{users:{},filters:{}},setup(_){const p=_,x=f(()=>p.users?.data||[]),y=f(()=>p.users?.links||[]),w=[{label:"Dashboard"},{label:"User Management"}],m=h(p.filters?.search||""),d=h(!1),v={aktif:"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-600/20",lulus:"bg-blue-100 text-blue-700 ring-1 ring-blue-600/20",keluar:"bg-rose-100 text-rose-700 ring-1 ring-rose-600/20",tinggal_kelas:"bg-amber-100 text-amber-700 ring-1 ring-amber-600/20"},k=r=>r.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase());N(m,V.debounce(r=>{g.get(c.siswa().url,{search:r},{preserveState:!0,preserveScroll:!0,replace:!0})},300));const S=r=>{confirm(`Apakah Anda yakin ingin menghapus siswa ${r.name}?`)&&g.delete(c.destroySiswa({id:r.siswa.nis}).url,{preserveScroll:!0,onSuccess:()=>{u.success("Data siswa berhasil dihapus")},onError:t=>{const e=F();e.props.flash?.error?u.error(e.props.flash.error):u.error("Gagal menghapus data. Siswa mungkin memiliki data terkait.")}})};return(r,t)=>(l(),i("div",Q,[s("div",R,[a(I,{items:w}),s("div",W,[s("div",X,[a(o(K),{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),j(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),type:"text",placeholder:"Cari siswa (Nama/NIS)...",class:"h-10 w-full rounded-lg border border-gray-200 bg-white pr-4 pl-10 text-sm outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 sm:w-64"},null,512),[[D,m.value]])]),s("button",{onClick:t[1]||(t[1]=e=>d.value=!0),class:"flex items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition-colors hover:bg-gray-50"},[a(o(G),{class:"h-4 w-4 text-green-600"}),t[4]||(t[4]=s("span",null,"Import Excel",-1))]),a(o(E),{href:o(c).tambahSiswa(),class:"flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700"},{default:b(()=>[a(o(H),{class:"h-4 w-4"}),t[5]||(t[5]=s("span",null,"Tambah Siswa",-1))]),_:1,__:[5]},8,["href"])])]),s("div",Y,[s("table",Z,[t[7]||(t[7]=s("thead",{class:"bg-gray-50 text-xs text-gray-700 uppercase"},[s("tr",null,[s("th",{class:"px-6 py-4 font-semibold"},"Nama Siswa"),s("th",{class:"px-6 py-4 font-semibold"},"NIS / Email"),s("th",{class:"px-6 py-4 font-semibold"},"Kelas"),s("th",{class:"px-6 py-4 text-center font-semibold"},"Status"),s("th",{class:"px-6 py-4 text-right font-semibold"},"Aksi")])],-1)),s("tbody",ss,[(l(!0),i(P,null,T(x.value,e=>(l(),i("tr",{key:e.id,class:"hover:bg-gray-50/50"},[s("td",es,[s("div",ts,[s("div",as,[e.siswa.pas_photo?(l(),i("img",{key:1,alt:e.name,src:`/storage/${e.siswa.pas_photo}`},null,8,os)):(l(),A(o(L),{key:0,name:e.name,alt:""},null,8,["name"]))]),s("div",rs,n(e.name),1)])]),s("td",ls,[s("div",is,[s("span",ns,n(e.siswa.nis||"-"),1),s("span",ds,n(e.email),1)])]),s("td",cs,[s("span",ps,n(e.kelas?.nama||"-"),1)]),s("td",ms,[s("span",{class:B(["inline-flex items-center rounded-full px-3 py-1 text-xs font-bold shadow-sm transition-all",v[e.siswa.status.toLowerCase()]||"bg-gray-100 text-gray-600"])},n(k(e.siswa.status)),3)]),s("td",gs,[s("div",us,[s("button",{onClick:C=>o(g).visit(o(c).editSiswa({id:e.siswa.nis}).url),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-indigo-600"},[a(o(q),{class:"h-4 w-4"})],8,xs),s("button",{onClick:C=>S(e),class:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",title:"Hapus Siswa"},[a(o(J),{class:"h-4 w-4"})],8,fs)])])]))),128)),x.value.length===0?(l(),i("tr",hs,t[6]||(t[6]=[s("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-400"},"Tidak ada data siswa ditemukan.",-1)]))):M("",!0)])])]),a(O,{class:"px-4",links:y.value},null,8,["links"]),a(U,{isOpen:d.value,onClose:t[3]||(t[3]=e=>d.value=!1)},{default:b(()=>[a(z,{onClose:t[2]||(t[2]=e=>d.value=!1)})]),_:1},8,["isOpen"])]))}});export{Ps as default};
