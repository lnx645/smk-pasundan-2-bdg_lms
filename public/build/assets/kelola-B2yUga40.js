import{y as _,_ as B,r as d,a9 as D,b as n,o as i,e as t,h,d as c,i as u,v as U,F as C,j as M,t as r,k as v,n as G,s as I,L,f as H,z as j,T as P,W as E,a3 as w,aa as k,C as o}from"./app-6R2423CB.js";import{P as F}from"./pencil-BzU3Ty20.js";import{X as K}from"./x-BxVaUl50.js";/**
 * @license lucide-vue-next v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=_("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);/**
 * @license lucide-vue-next v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=_("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-vue-next v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=_("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),W={class:"min-h-screen bg-gray-50/50 p-6 font-sans text-gray-800"},X={class:"mx-auto mb-8 max-w-7xl"},J={class:"flex flex-col justify-between gap-6 md:flex-row md:items-center"},Q={class:"flex w-full items-center rounded-xl border border-gray-200 bg-white p-1 shadow-sm md:w-72"},R={class:"pl-3 text-gray-400"},Y=["value"],Z={class:"mx-auto max-w-7xl"},tt={class:"relative overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm"},et={key:0,class:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm"},st={class:"overflow-x-auto"},at={class:"min-w-full divide-y divide-gray-100"},ot={class:"divide-y divide-gray-100 bg-white"},it={class:"px-6 py-4 whitespace-nowrap"},lt={class:"flex items-center"},nt={class:"mr-3 flex h-9 w-9 items-center justify-center rounded-full bg-indigo-100 text-sm font-bold text-indigo-600"},rt={class:"text-sm font-semibold text-gray-900"},dt={class:"text-xs text-gray-400"},ct={class:"px-6 py-4"},ut={class:"flex flex-col"},mt={class:"text-sm font-medium text-gray-800"},gt={class:"mt-1 w-fit rounded-full bg-indigo-50 px-2 py-0.5 text-xs text-indigo-500"},pt={class:"px-6 py-4 text-center whitespace-nowrap"},xt={class:"px-6 py-4"},bt=["title"],yt={class:"px-6 py-4 text-right text-sm font-medium whitespace-nowrap"},ft={class:"flex items-center justify-end gap-2 opacity-100 transition-opacity sm:opacity-0 sm:group-hover:opacity-100"},ht=["onClick"],vt=["onClick"],wt={key:0},kt={colspan:"5",class:"px-6 py-12 text-center"},_t={class:"flex flex-col items-center justify-center text-gray-400"},Ct={key:0,class:"fixed inset-0 z-[9999] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Mt={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},jt={class:"relative z-10 inline-block w-full transform overflow-hidden rounded-2xl bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:max-w-lg sm:align-middle"},Nt={class:"flex items-center justify-between border-b border-gray-100 bg-gray-50 px-4 py-3 sm:px-6"},St={class:"space-y-4"},At={__name:"kelola",setup(zt){const b=d([]),y=d([]),m=d(""),g=d(!1),f=d(!1),l=d({id:null,angka:0,komentar:""}),N=a=>a?a.charAt(0).toUpperCase():"?",S=a=>a>=85?"bg-green-100 text-green-700 border-green-200":a>=75?"bg-blue-100 text-blue-700 border-blue-200":a>=60?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200",p=async()=>{g.value=!0;try{const a={};m.value&&(a.siswa_id=m.value);const e=await w.get(k.index().url,{params:a});b.value=e.data.nilai,y.value.length===0&&(y.value=e.data.siswa)}catch(a){console.error("Gagal mengambil data:",a),o.error("Gagal memuat data dari server")}finally{g.value=!1}},A=async a=>{if(!confirm("Apakah Anda yakin ingin menghapus nilai ini?"))return;const e=o.loading("Menghapus data...");try{await w.delete(k.destroy({id:a}).url),p(),o.dismiss(e),o.success("Data nilai berhasil dihapus!")}catch{o.dismiss(e),o.error("Gagal menghapus data nilai.")}},z=async()=>{const a=o.loading("Menyimpan perubahan...");try{await w.put(k.update({id:l.value.id}).url,{angka:l.value.angka,komentar:l.value.komentar}),x(),p(),o.dismiss(a),o.success("Data nilai berhasil diperbarui!")}catch(e){console.error(e),o.dismiss(a),o.error("Gagal memperbarui data.")}},T=a=>{l.value={id:a.id,angka:a.angka,komentar:a.komentar},f.value=!0},x=()=>{f.value=!1};return D(()=>{p()}),(a,e)=>(i(),n("div",W,[t("div",X,[t("div",J,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold tracking-tight text-gray-900"},"Daftar Nilai Siswa"),t("p",{class:"mt-1 text-sm text-gray-500"},"Kelola data akademik dan evaluasi hasil belajar siswa.")],-1)),t("div",Q,[t("div",R,[c(u($),{class:"h-5 w-5"})]),h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),onChange:p,class:"w-full cursor-pointer border-none bg-transparent py-2.5 text-sm font-medium text-gray-700 focus:ring-0"},[e[3]||(e[3]=t("option",{value:""},"Tampilkan Semua Siswa",-1)),(i(!0),n(C,null,M(y.value,s=>(i(),n("option",{key:s.id,value:s.id},r(s.name),9,Y))),128))],544),[[U,m.value]])])])]),t("div",Z,[t("div",tt,[g.value?(i(),n("div",et,e[5]||(e[5]=[t("svg",{class:"mb-3 h-10 w-10 animate-spin text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("span",{class:"text-sm font-medium text-indigo-600"},"Memuat data...",-1)]))):v("",!0),t("div",st,[t("table",at,[e[7]||(e[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold tracking-wider text-gray-500 uppercase"},"Siswa"),t("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold tracking-wider text-gray-500 uppercase"}," Mata Pelajaran / Tugas "),t("th",{scope:"col",class:"px-6 py-4 text-center text-xs font-semibold tracking-wider text-gray-500 uppercase"},"Nilai"),t("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold tracking-wider text-gray-500 uppercase"}," Komentar Guru "),t("th",{scope:"col",class:"px-6 py-4 text-right text-xs font-semibold tracking-wider text-gray-500 uppercase"},"Aksi")])],-1)),t("tbody",ot,[(i(!0),n(C,null,M(b.value,s=>(i(),n("tr",{key:s.id,class:"group transition-colors duration-200 hover:bg-gray-50/80"},[t("td",it,[t("div",lt,[t("div",nt,r(N(s.siswa?.name)),1),t("div",null,[t("div",rt,r(s.siswa?.name||"Unknown"),1),t("div",dt,"ID: "+r(String(s.siswa.id).substring(0,6))+"...",1)])])]),t("td",ct,[t("div",ut,[t("span",mt,r(s.tugas?.title||"-"),1),t("span",gt,r(s.tugas?.matpel?.nama||"Umum"),1)])]),t("td",pt,[t("span",{class:G(["inline-flex rounded-full border px-3 py-1 text-sm leading-5 font-bold",S(s.angka)])},r(s.angka),3)]),t("td",xt,[t("p",{class:"max-w-xs truncate text-sm text-gray-500",title:s.komentar},r(s.komentar||"-"),9,bt)]),t("td",yt,[t("div",ft,[t("button",{onClick:V=>T(s),class:"rounded-lg bg-indigo-50 p-2 text-indigo-600 transition-colors hover:bg-indigo-100",title:"Edit Nilai"},[c(u(F),{class:"h-4 w-4"})],8,ht),t("button",{onClick:V=>A(s.id),class:"rounded-lg bg-red-50 p-2 text-red-600 transition-colors hover:bg-red-100",title:"Hapus Nilai"},[c(u(O),{class:"h-4 w-4"})],8,vt)])])]))),128)),!g.value&&b.value.length===0?(i(),n("tr",wt,[t("td",kt,[t("div",_t,[c(u(q),{class:"mb-3 h-12 w-12 text-gray-300"}),e[6]||(e[6]=t("p",{class:"text-base font-medium text-gray-500"},"Belum ada data nilai.",-1))])])])):v("",!0)])])])])]),t("template",null,[(i(),I(E,{to:"body"},[c(P,{name:"modal"},{default:L(()=>[f.value?(i(),n("div",Ct,[t("div",Mt,[t("div",{class:"bg-opacity-40 fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:x}),e[12]||(e[12]=t("span",{class:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"},"â€‹",-1)),t("div",jt,[t("div",Nt,[e[8]||(e[8]=t("h3",{class:"text-lg leading-6 font-bold text-gray-900",id:"modal-title"},"Update Penilaian",-1)),t("button",{onClick:x,class:"text-gray-400 hover:text-gray-600"},[c(u(K),{class:"h-5 w-5"})])]),t("form",{onSubmit:H(z,["prevent"]),class:"p-6"},[t("div",St,[t("div",null,[e[9]||(e[9]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Nilai Akhir",-1)),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.angka=s),type:"number",min:"0",max:"100",class:"block w-full border rounded-lg border-gray-300 py-2.5 pl-4 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[j,l.value.angka,void 0,{number:!0}]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Komentar",-1)),h(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.komentar=s),rows:"4",class:"block w-full border rounded-lg border-gray-300 p-3 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[j,l.value.komentar]])])]),t("div",{class:"mt-8 flex justify-end gap-3"},[t("button",{type:"button",onClick:x,class:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e[11]||(e[11]=t("button",{type:"submit",class:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"}," Simpan Perubahan ",-1))])],32)])])])):v("",!0)]),_:1})]))])]))}},Dt=B(At,[["__scopeId","data-v-ed5d1cb4"]]);export{Dt as default};
