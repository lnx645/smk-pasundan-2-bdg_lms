import{_ as j,b as s,o as a,e,m as L,p as I,c as x,aV as C,u as P,r as D,t as r,d as c,g as h,i as m,ah as M,k as g,F as H,j as V,h as N,z as R,n as U,f as _,C as w,A as z,aW as G}from"./app-6R2423CB.js";import{I as J}from"./IcBaselineDelete-DmK8arhr.js";import{M as y}from"./MaterialSymbolsCheckCircleUnreadOutline-UzKn15En.js";import{a as K}from"./index-Du4aB6X0.js";const E={name:"MaterialSymbolsLightDriveFolderUploadRounded"},W={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function O(k,d,l,n,i,p){return a(),s("svg",W,d[0]||(d[0]=[e("path",{fill:"currentColor",d:"M4.616 19q-.691 0-1.153-.462T3 17.384V6.616q0-.691.463-1.153T4.615 5h4.31q.323 0 .628.13q.305.132.522.349L11.596 7h7.789q.69 0 1.153.463T21 8.616v8.769q0 .69-.462 1.153T19.385 19zM12 16.23q.214 0 .357-.142t.143-.357v-4.2l1.766 1.765q.14.14.343.15t.364-.15t.16-.354t-.16-.353l-2.408-2.408q-.242-.242-.565-.242t-.566.242L9.066 12.55q-.141.14-.15.344t.15.364t.353.16t.354-.16L11.5 11.53v4.2q0 .213.143.357t.357.143"},null,-1)]))}const Q=j(E,[["render",O]]),X={name:"SolarDocumentAddBold"},Y={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function Z(k,d,l,n,i,p){return a(),s("svg",Y,d[0]||(d[0]=[e("path",{fill:"currentColor",d:"M16.519 16.501c.175-.136.334-.295.651-.612l3.957-3.958c.096-.095.052-.26-.075-.305a4.3 4.3 0 0 1-1.644-1.034a4.3 4.3 0 0 1-1.034-1.644c-.045-.127-.21-.171-.305-.075L14.11 12.83c-.317.317-.476.476-.612.651q-.243.311-.412.666c-.095.2-.166.414-.308.84l-.184.55l-.292.875l-.273.82a.584.584 0 0 0 .738.738l.82-.273l.875-.292l.55-.184c.426-.142.64-.212.84-.308q.355-.17.666-.412m5.849-5.809a2.163 2.163 0 1 0-3.06-3.059l-.126.128a.52.52 0 0 0-.148.465c.02.107.055.265.12.452c.13.375.376.867.839 1.33s.955.709 1.33.839c.188.065.345.1.452.12a.53.53 0 0 0 .465-.148z"},null,-1),e("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.172 3.172C3 4.343 3 6.229 3 10v4c0 3.771 0 5.657 1.172 6.828S7.229 22 11 22h2c3.771 0 5.657 0 6.828-1.172C20.981 19.676 21 17.832 21 14.18l-2.818 2.818c-.27.27-.491.491-.74.686a5 5 0 0 1-.944.583a8 8 0 0 1-.944.355l-2.312.771a2.083 2.083 0 0 1-2.635-2.635l.274-.82l.475-1.426l.021-.066c.121-.362.22-.658.356-.944q.24-.504.583-.943c.195-.25.416-.47.686-.74l4.006-4.007L18.12 6.7l.127-.127A3.65 3.65 0 0 1 20.838 5.5c-.151-1.03-.444-1.763-1.01-2.328C18.657 2 16.771 2 13 2h-2C7.229 2 5.343 2 4.172 3.172M7.25 9A.75.75 0 0 1 8 8.25h6.5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 9m0 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75m0 4a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75",clipRule:"evenodd"},null,-1)]))}const T=j(X,[["render",Z]]),ee={name:"StreamlinePlumpEmailAttachmentDocumentSolid"},te={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48"};function se(k,d,l,n,i,p){return a(),s("svg",te,d[0]||(d[0]=[e("path",{fill:"currentColor",d:"M46.5 23c0-2.018-.024-3.847-.066-5.5c-.704 0-1.592-.002-2.56-.012c-2.27-.023-5.043-.088-6.867-.263c-3.333-.32-5.924-2.976-6.245-6.325c-.175-1.825-.236-4.575-.254-6.823c-.008-.962-.009-1.845-.006-2.542Q28.862 1.501 27 1.5c-6.315 0-10.674.323-13.418.637c-2.895.33-5.093 2.531-5.413 5.431c-.207 1.875-.42 4.537-.549 8.168A13.3 13.3 0 0 1 12 15c6.958 0 13 5.44 13 12.636v8.728c0 3.117-1.133 5.905-2.984 8.063q2.254.071 4.984.073c6.315 0 10.674-.323 13.418-.637c2.896-.33 5.094-2.531 5.414-5.431c.325-2.954.668-7.861.668-15.432"},null,-1),e("path",{fill:"currentColor",d:"M33.508 4.052c.018 2.255.079 4.883.24 6.562c.188 1.958 1.683 3.446 3.546 3.625c1.68.161 4.333.226 6.61.25c.803.008 1.55.01 2.182.011c-.594-1.394-2.033-3.944-5.433-7.277c-3.203-3.14-5.694-4.571-7.152-5.21c-.001.598 0 1.295.007 2.04"},null,-1),e("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.792 18.833A10.76 10.76 0 0 1 12 17.5c5.688 0 10.5 4.43 10.5 10.136v8.728C22.5 42.07 17.688 46.5 12 46.5S1.5 42.07 1.5 36.364v-4.768c0-3.676 3.087-6.46 6.648-6.46s6.648 2.784 6.648 6.46v4.677a2.5 2.5 0 0 1-5 0v-4.677c0-.698-.627-1.46-1.648-1.46s-1.648.762-1.648 1.46v4.768c0 2.728 2.352 5.136 5.5 5.136s5.5-2.408 5.5-5.136v-8.728c0-2.728-2.352-5.136-5.5-5.136c-1.028 0-1.98.262-2.792.71a2.5 2.5 0 0 1-2.416-4.377",clipRule:"evenodd"},null,-1)]))}const ae=j(ee,[["render",se]]),le={class:"mx-auto mt-4 max-w-7xl pb-20"},ne={class:"mb-6 border-b border-neutral-200 pb-6"},oe={class:"flex flex-col justify-between gap-4 md:flex-row md:items-start"},re={class:"mb-2 flex items-center gap-2 text-sm text-neutral-500"},de={class:"font-medium text-blue-600"},ie={class:"text-3xl font-bold tracking-tight text-neutral-800"},ue={class:"flex flex-col items-end gap-1"},ce={key:0,class:"flex items-center gap-2 rounded-lg border border-emerald-200 bg-emerald-100 px-4 py-2 text-sm font-bold text-emerald-700"},me={key:1,class:"flex items-center gap-2 rounded-lg border border-blue-200 bg-blue-50 px-4 py-2 text-sm font-bold text-blue-700"},be={key:2,class:"rounded-lg border border-red-200 bg-red-50 px-4 py-2 text-sm font-bold text-red-600"},pe={key:3,class:"rounded-lg border border-neutral-200 bg-neutral-100 px-4 py-2 text-sm font-medium text-neutral-600"},xe={class:"mt-1 text-xs text-neutral-400"},ge={class:"grid grid-cols-1 items-start gap-8 lg:grid-cols-12"},fe={class:"space-y-6 lg:col-span-8"},ve={class:"min-h-[300px] rounded-xl border border-neutral-200 bg-white p-6 shadow-sm"},he=["innerHTML"],_e={key:0},ke={class:"grid grid-cols-1 gap-3 sm:grid-cols-2"},we=["href"],ye={class:"flex h-10 w-10 items-center justify-center rounded bg-neutral-100 text-neutral-500 group-hover:text-blue-600"},je={class:"overflow-hidden"},$e={class:"truncate text-sm font-medium text-neutral-800 group-hover:text-blue-700"},Ce={class:"sticky top-6 lg:col-span-4"},De={class:"overflow-hidden rounded-xl border border-neutral-200 bg-white shadow-lg"},Me={class:"flex items-center justify-between border-b border-neutral-200 bg-neutral-50 px-5 py-4"},Te={class:"rounded bg-blue-100 px-2 py-0.5 text-[10px] font-bold text-blue-700 uppercase"},Ae={key:0,class:"p-6 text-center"},Se={class:"mx-auto mb-3 flex h-16 w-16 items-center justify-center rounded-full bg-emerald-100 text-2xl font-bold text-emerald-600"},qe={class:"mt-1 text-sm text-neutral-500"},Fe={class:"mt-6 border-t border-neutral-100 pt-4"},Be=["href"],Le={key:1,class:"rounded border border-neutral-100 bg-neutral-50 p-3 text-sm text-neutral-700 italic"},Ie={key:1,class:"p-6 text-center"},Pe={class:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 text-blue-600"},He={class:"mt-1 mb-4 text-xs text-neutral-500"},Ve={key:0,class:"space-y-3"},Ne={key:1,class:"rounded bg-amber-50 p-2 text-xs text-amber-600"},Re={key:2,class:"space-y-4 p-5"},Ue={key:0,class:"mb-2 rounded border border-red-100 bg-red-50 p-3 text-xs text-red-600"},ze={key:1},Ge={key:2},Je=["accept"],Ke={key:0},Ee={class:"mx-auto mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-neutral-100 text-neutral-400 transition-colors group-hover:bg-blue-100 group-hover:text-blue-500"},We={key:1,class:"flex items-center justify-between rounded border border-blue-100 bg-white p-2 shadow-sm"},Oe={class:"flex items-center gap-2 overflow-hidden"},Qe={class:"flex h-8 w-8 shrink-0 items-center justify-center rounded bg-blue-100 text-blue-600"},Xe={class:"max-w-[150px] truncate text-xs font-medium text-neutral-700"},Ye=["disabled"],Ze={key:0},et={key:1},nt=L({__name:"kerjakan",setup(k){const d=I(),l=x(()=>d.props.tugas),n=x(()=>d.props.submission),i=x(()=>C().isAfter(C(l.value.deadline))),p=x(()=>!!n.value),$=x(()=>n.value?.nilai!==null&&n.value?.nilai!==void 0),o=P({tugas_id:l.value.tugasID,jawaban_text:n.value?.jawaban_text||"",file:null}),f=D(null),v=D(!1);function A(b){const t=b.target;t.files&&t.files.length>0&&(o.file=t.files[0])}function S(b){v.value=!1,b.dataTransfer?.files&&b.dataTransfer.files.length>0&&(o.file=b.dataTransfer.files[0])}function q(){o.file=null,f.value&&(f.value.value="")}function F(){if(!o.file&&!o.jawaban_text&&l.value.mode_pengumpulan!=="text"){w.error("Harap lampirkan file jawaban.");return}o.submit(K({id:l.value.tugasID}),{onSuccess:()=>{w.success("Tugas berhasil dikumpulkan!")},onError:()=>w.error("Gagal mengumpulkan tugas.")})}function B(){confirm("Batalkan pengumpulan? Anda harus mengupload ulang jawaban.")&&z.delete(G({id:n.value.jawabanID}).url)}return(b,t)=>(a(),s("div",le,[e("div",ne,[e("div",oe,[e("div",null,[e("div",re,[e("span",de,r(l.value.matpel?.nama||"Matematika"),1),t[4]||(t[4]=e("span",null,"â€¢",-1)),e("span",null,r(l.value.user.name||"Pak Guru"),1)]),e("h1",ie,r(l.value.title),1)]),e("div",ue,[$.value?(a(),s("div",ce,[c(y,{class:"text-xl"}),h(" Nilai: "+r(n.value.nilai.angka)+" / 100 ",1)])):p.value?(a(),s("div",me,[c(y,{class:"text-xl"}),t[5]||(t[5]=h(" Sudah Dikumpulkan ",-1))])):i.value?(a(),s("div",be," Terlewat Deadline ")):(a(),s("div",pe," Ditugaskan ")),e("p",xe,"Tenggat: "+r(m(M)(l.value.deadline)),1)])])]),e("div",ge,[e("div",fe,[e("div",ve,[t[6]||(t[6]=e("h3",{class:"mb-4 border-b border-neutral-100 pb-2 text-sm font-bold tracking-wider text-neutral-500 uppercase"},"Instruksi",-1)),e("div",{class:"prose max-w-none text-sm leading-relaxed text-neutral-700",innerHTML:l.value.content},null,8,he)]),l.value.attachments&&l.value.attachments.length>0?(a(),s("div",_e,[t[8]||(t[8]=e("h3",{class:"mb-3 text-sm font-bold text-neutral-700"},"Lampiran Pendukung",-1)),e("div",ke,[(a(!0),s(H,null,V(l.value.attachments,u=>(a(),s("a",{key:u.id,href:u.url,target:"_blank",class:"group flex items-center gap-3 rounded-lg border border-neutral-200 bg-white p-3 transition-all hover:border-blue-400 hover:bg-blue-50"},[e("div",ye,[c(ae)]),e("div",je,[e("p",$e,r(u.name),1),t[7]||(t[7]=e("p",{class:"text-xs text-neutral-400"},"Klik untuk unduh",-1))])],8,we))),128))])])):g("",!0)]),e("div",Ce,[e("div",De,[e("div",Me,[t[9]||(t[9]=e("h3",{class:"font-bold text-neutral-700"},"Lembar Jawab",-1)),e("span",Te,r(l.value.mode_pengumpulan==="text"?"Teks":"File Upload"),1)]),$.value?(a(),s("div",Ae,[e("div",Se,r(n.value.nilai.angka),1),t[12]||(t[12]=e("h4",{class:"font-bold text-neutral-800"},"Tugas Selesai Dinilai",-1)),e("p",qe,'"'+r(n.value.feedback||"Kerja bagus, pertahankan!")+'"',1),e("div",Fe,[t[11]||(t[11]=e("p",{class:"mb-2 text-xs text-neutral-400"},"Jawaban Anda:",-1)),n.value.file_url?(a(),s("a",{key:0,href:n.value.file_url,target:"_blank",class:"flex items-center justify-center gap-1 text-sm text-blue-600 hover:underline"},[c(T),t[10]||(t[10]=h(" Lihat File Anda ",-1))],8,Be)):(a(),s("p",Le,r(n.value.jawaban_text),1))])])):p.value?(a(),s("div",Ie,[e("div",Pe,[c(y,{class:"text-2xl"})]),t[14]||(t[14]=e("h4",{class:"font-bold text-neutral-800"},"Berhasil Dikirim",-1)),e("p",He,"Dikirim pada "+r(m(M)(n.value.created_at)),1),i.value?(a(),s("div",Ne,"Masa pengumpulan telah berakhir. Tidak dapat diubah.")):(a(),s("div",Ve,[t[13]||(t[13]=e("p",{class:"text-xs text-neutral-400"},"Ingin mengubah jawaban?",-1)),e("button",{onClick:B,class:"w-full rounded-lg border border-red-200 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-50"}," Batalkan Pengumpulan ")]))])):(a(),s("div",Re,[i.value?(a(),s("div",Ue,t[15]||(t[15]=[e("span",{class:"font-bold"},"Terlambat!",-1),h(" Anda mengumpulkan melewati tenggat waktu. ",-1)]))):g("",!0),!i.value&&["text","mixed"].includes(l.value.mode_pengumpulan)?(a(),s("div",ze,[t[16]||(t[16]=e("label",{class:"mb-1 block text-xs font-semibold text-neutral-500"},"Jawaban Teks",-1)),N(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=u=>m(o).jawaban_text=u),rows:"6",class:"w-full rounded-lg border-neutral-300 text-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Ketik jawaban Anda di sini..."},null,512),[[R,m(o).jawaban_text]])])):g("",!0),!i.value&&["file","foto","mixed"].includes(l.value.mode_pengumpulan)?(a(),s("div",Ge,[t[19]||(t[19]=e("label",{class:"mb-1 block text-xs font-semibold text-neutral-500"},"Upload File",-1)),e("div",{onDragover:t[1]||(t[1]=_(u=>v.value=!0,["prevent"])),onDragleave:t[2]||(t[2]=_(u=>v.value=!1,["prevent"])),onDrop:_(S,["prevent"]),onClick:t[3]||(t[3]=u=>f.value?.click()),class:U(["group cursor-pointer rounded-xl border-2 border-dashed p-6 text-center transition-all duration-200",v.value?"border-blue-500 bg-blue-50":"border-neutral-300 hover:border-blue-400 hover:bg-neutral-50"])},[e("input",{type:"file",ref_key:"fileInput",ref:f,class:"hidden",onChange:A,accept:l.value.mode_pengumpulan==="foto"?"image/*":"*"},null,40,Je),m(o).file?(a(),s("div",We,[e("div",Oe,[e("div",Qe,[c(T)]),e("p",Xe,r(m(o).file.name),1)]),e("button",{onClick:_(q,["stop"]),class:"p-1 text-red-400 hover:text-red-600"},[c(J)])])):(a(),s("div",Ke,[e("div",Ee,[c(Q,{class:"text-xl"})]),t[17]||(t[17]=e("p",{class:"text-sm font-medium text-neutral-700"},"Klik atau Drag File",-1)),t[18]||(t[18]=e("p",{class:"mt-1 text-xs text-neutral-400"},"PDF, Word, JPG (Max 10MB)",-1))]))],34)])):g("",!0),i.value?g("",!0):(a(),s("button",{key:3,onClick:F,disabled:m(o).processing,class:"flex w-full items-center justify-center gap-2 rounded-lg bg-blue-600 py-2.5 font-semibold text-white shadow-sm transition-all hover:bg-blue-700 hover:shadow-md active:scale-95 disabled:cursor-not-allowed disabled:opacity-70"},[m(o).processing?(a(),s("span",Ze,"Mengirim...")):(a(),s("span",et,"Serahkan Tugas"))],8,Ye))]))]),t[20]||(t[20]=e("div",{class:"mt-4 flex items-start gap-3 rounded-lg border border-yellow-100 bg-yellow-50 p-3"},[e("span",{class:"text-lg text-yellow-600"},"ðŸ’¡"),e("p",{class:"text-xs leading-snug text-yellow-800"}," Pastikan file yang diunggah sudah benar. Anda tidak bisa mengubah jawaban setelah tenggat waktu berakhir. ")],-1))])])]))}});export{nt as default};
