import{m as P,p as B,r as C,u as S,c as b,b as a,o,e,d as u,i as l,t as n,g,h as f,v as y,F as m,j as p,k as K,R as V,C as v}from"./app-6R2423CB.js";import{e as T}from"./avatar.esm-Bt11miEG.js";import{P as A}from"./plus-BT25xviA.js";import{X as N}from"./x-BxVaUl50.js";import{S as D}from"./save-BklBu0eK.js";const F={class:"px-6 py-6"},$={class:"mb-6 flex items-center gap-3 rounded-xl border border-indigo-100 bg-indigo-50 p-3"},E={class:"text-sm font-bold text-gray-900"},I={class:"font-mono text-xs text-indigo-600"},G={class:"mb-4"},L={key:1,class:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm ring-1 ring-indigo-100"},R={class:"mb-3 flex items-center justify-between"},X={class:"grid grid-cols-1 gap-3 sm:grid-cols-2"},q={class:"space-y-1"},z=["value"],H={class:"space-y-1"},J=["value"],O={class:"mt-4 flex justify-end gap-2"},Q={class:"custom-scrollbar max-h-[300px] space-y-2 overflow-y-auto pr-2"},W={class:"mb-2 flex items-center justify-between px-1"},Y={class:"text-xs text-gray-400"},Z={class:"flex items-center gap-3"},ee={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-orange-100 text-xs font-bold text-orange-600"},se={class:"text-sm font-medium text-gray-900"},te={class:"flex items-center gap-1 text-xs text-gray-500"},ae={class:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 shadow-sm ring-1 ring-gray-200 transition-all ring-inset group-hover:text-indigo-700 group-hover:ring-indigo-200"},oe={key:0,class:"py-8 text-center text-xs text-gray-400 italic"},ue=P({__name:"penugasan-guru",props:{selectedUser:{}},emits:["closeModal"],setup(h,{emit:k}){const _=h,c=B().props,d=C(!1),w=k,i=S({matpel_kode:"",kelas_id:"",guru_nip:_.selectedUser.guru.nip}),j=b(()=>c.matpels||[]),U=b(()=>c.kelas||[]),M=()=>{i.submit(V(),{onSuccess(){d.value=!1,i.reset(),v.success("Berhasil di tambahkan",{position:"top-center"}),w("closeModal")},onError(r){v.error(r.message||"Terjadi kesalahan saat menyimpan.",{position:"top-center"})}})};return(r,s)=>(o(),a("div",F,[e("div",$,[u(l(T),{name:r.selectedUser?.nama,class:"h-10 w-10 rounded-full bg-white shadow-sm"},null,8,["name"]),e("div",null,[e("p",E,n(r.selectedUser?.nama),1),e("p",I,n(r.selectedUser?.guru?.nip),1)])]),e("div",G,[d.value?(o(),a("div",L,[e("div",R,[s[6]||(s[6]=e("h4",{class:"text-xs font-semibold tracking-wider text-gray-500 uppercase"},"Penugasan Baru",-1)),e("button",{onClick:s[1]||(s[1]=t=>d.value=!1),class:"text-gray-400 hover:text-gray-600"},[u(l(N),{class:"h-4 w-4"})])]),e("div",X,[e("div",q,[s[8]||(s[8]=e("label",{class:"text-xs font-medium text-gray-700"},"Mata Pelajaran",-1)),f(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>l(i).matpel_kode=t),class:"block w-full px-2 outline-none rounded-lg border border-gray-200 py-2 text-xs focus:border-indigo-500 focus:ring-indigo-500"},[s[7]||(s[7]=e("option",{value:"",disabled:""},"Pilih Matpel...",-1)),(o(!0),a(m,null,p(j.value,t=>(o(),a("option",{key:t.kode,value:t.kode},n(t.nama),9,z))),128))],512),[[y,l(i).matpel_kode]])]),e("div",H,[s[10]||(s[10]=e("label",{class:"text-xs font-medium text-gray-700"},"Kelas",-1)),f(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>l(i).kelas_id=t),class:"block w-full px-2 outline-none rounded-lg border border-gray-200 py-2 text-xs focus:border-indigo-500 focus:ring-indigo-500"},[s[9]||(s[9]=e("option",{value:"",disabled:""},"Pilih Kelas...",-1)),(o(!0),a(m,null,p(U.value,t=>(o(),a("option",{key:t.id,value:t.id},n(t.nama),9,J))),128))],512),[[y,l(i).kelas_id]])])]),e("div",O,[e("button",{onClick:s[4]||(s[4]=t=>d.value=!1),class:"rounded-lg px-3 py-2 text-xs font-medium text-gray-600 hover:bg-gray-100"},"Batal"),e("button",{onClick:M,class:"flex items-center gap-1.5 rounded-lg bg-indigo-600 px-3 py-2 text-xs font-medium text-white shadow-sm hover:bg-indigo-700"},[u(l(D),{class:"h-3.5 w-3.5"}),s[11]||(s[11]=g(" Simpan ",-1))])])])):(o(),a("button",{key:0,onClick:s[0]||(s[0]=t=>d.value=!0),class:"flex w-full items-center justify-center gap-2 rounded-lg border border-dashed border-gray-300 bg-gray-50 py-2.5 text-sm font-medium text-gray-500 transition-all hover:border-indigo-300 hover:bg-indigo-50 hover:text-indigo-600"},[u(l(A),{class:"h-4 w-4"}),s[5]||(s[5]=g(" Tambah Mata Pelajaran & Kelas ",-1))]))]),e("div",Q,[e("div",W,[s[12]||(s[12]=e("span",{class:"text-xs font-medium text-gray-500"},"Daftar Saat Ini",-1)),e("span",Y,n(r.selectedUser?.guru?.pengajarans?.length||0)+" Item",1)]),(o(!0),a(m,null,p(r.selectedUser?.guru?.pengajarans,(t,x)=>(o(),a("div",{key:x,class:"group flex items-center justify-between rounded-lg border border-gray-100 p-3 transition-colors hover:bg-gray-50"},[e("div",Z,[e("div",ee,n(x+1),1),e("div",null,[e("p",se,n(t.matpel?.nama||t.matpel?.nama_pelajaran||"Matpel Tidak Ada"),1),e("p",te,[s[13]||(s[13]=e("span",{class:"h-1.5 w-1.5 rounded-full bg-gray-300"},null,-1)),g(" Kode: "+n(t.matpel_kode),1)])])]),e("span",ae," Kelas "+n(t.kelas?.nama||t.kelas?.nama_kelas||"?"),1)]))),128)),r.selectedUser?.guru?.pengajarans?.length?K("",!0):(o(),a("div",oe," Belum ada penugasan mata pelajaran. "))])]))}});export{ue as _};
