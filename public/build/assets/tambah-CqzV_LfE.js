import{m as U,u as M,r as P,c as N,b as n,o,e,d,L as C,g as p,i as a,O as b,P as G,t as l,n as u,s as L,k as m,h as c,v as k,F as B,j as S,Q as y,C as f}from"./app-6R2423CB.js";import{_ as x}from"./input.vue_vue_type_script_setup_true_lang-lZDRTLU2.js";import{_ as A}from"./breadcrumb.vue_vue_type_script_setup_true_lang-DduX5xEt.js";import{A as K}from"./arrow-left-J-lF9cgP.js";import{S as D}from"./save-BklBu0eK.js";import{U as $}from"./user-DS_0byUx.js";const F={class:"min-h-screen w-full bg-gray-50/50 pb-20 font-sans"},I={class:"mb-4 flex flex-col gap-4 px-1 sm:flex-row sm:items-center sm:justify-between"},T={class:"flex gap-3"},E=["disabled"],O={class:"grid p-3 grid-cols-1 gap-8 lg:grid-cols-3"},z={class:"space-y-6 lg:col-span-1"},J={class:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm"},R={class:"flex flex-col items-center justify-center gap-4"},Q=["src"],q={class:"text-center"},H={key:0,class:"mt-2 text-xs font-medium text-red-600 animate-pulse"},W={class:"rounded-xl border border-gray-200 bg-gradient-to-br from-indigo-600 to-indigo-800 p-6 text-white shadow-md"},X={class:"flex items-center gap-4"},Y={class:"flex h-12 w-12 items-center justify-center rounded-full bg-white/20 text-lg font-bold backdrop-blur-sm"},Z={class:"w-48 truncate text-sm font-bold"},ee={class:"text-xs text-indigo-200"},se={class:"lg:col-span-2"},te={class:"rounded-xl border border-gray-200 bg-white shadow-sm"},ae={class:"grid grid-cols-1 gap-x-6 gap-y-6 p-6 md:grid-cols-2"},re={class:"md:col-span-1"},oe={key:0,class:"mt-1 text-xs text-red-500"},le={class:"md:col-span-1"},ne={key:0,class:"mt-1 text-xs text-red-500"},ie={class:"md:col-span-2"},de={key:0,class:"mt-1 text-xs text-red-500"},me={class:"md:col-span-1"},ue={key:0,class:"mt-1 text-xs text-red-500"},pe={class:"md:col-span-1"},ge={key:0,class:"mt-1 text-xs text-red-500"},ce={class:"md:col-span-2"},fe={class:"relative"},xe=["value"],be={key:0,class:"mt-1 text-xs text-red-500"},ke={class:"md:col-span-2"},ye={class:"flex gap-4"},ve={key:0,class:"h-5 w-5 text-indigo-600"},Me=U({__name:"tambah",props:{matpels:{}},setup(v){const _=v,w=[{label:"Dashboard",href:"/dashboard"},{label:"Manajemen Guru",href:"/users/guru"},{label:"Tambah Data"}],t=M({name:"",nip:"",jenis_kelamin:"",status:"Aktif",gelar_depan:"",gelar_belakang:"",matpel_kode:"",foto:null}),g=P(null),h=i=>{const s=i.target;if(s.files&&s.files[0]){const r=s.files[0];if(r.size>2*1024*1024){f.error("Ukuran foto terlalu besar! Maksimal 2MB."),s.value="";return}t.foto=r,g.value=URL.createObjectURL(r)}},j=()=>{t.submit(b.simpanGuru(),{preserveScroll:!0,onSuccess:i=>{t.reset(),g.value=null;const s=i.props.flash?.success||"Data Guru berhasil disimpan!";f.success(s)},onError:i=>{f.error("Gagal menyimpan data. Silakan periksa inputan.");const s=Object.values(i)[0];s&&f.warning(`Error: ${s}`)}})},V=N(()=>{const i=t.gelar_depan?`${t.gelar_depan} `:"",s=t.name||"Nama Guru",r=t.gelar_belakang?`, ${t.gelar_belakang}`:"";return`${i}${s}${r}`});return(i,s)=>(o(),n("div",F,[e("div",I,[d(A,{items:w}),e("div",T,[d(a(G),{href:a(b).guru().url,class:"inline-flex items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-gray-200"},{default:C(()=>[d(a(K),{class:"h-4 w-4"}),s[8]||(s[8]=p(" Kembali ",-1))]),_:1,__:[8]},8,["href"]),e("button",{onClick:j,disabled:a(t).processing,class:"inline-flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm shadow-indigo-200 transition-all hover:bg-indigo-700 hover:shadow-md focus:ring-2 focus:ring-indigo-500 disabled:opacity-70 disabled:cursor-not-allowed"},[d(a(D),{class:"h-4 w-4"}),p(" "+l(a(t).processing?"Menyimpan...":"Simpan Data"),1)],8,E)])]),e("div",O,[e("div",z,[e("div",J,[s[11]||(s[11]=e("h3",{class:"mb-4 text-base font-semibold text-gray-900"},"Foto Profil",-1)),e("div",R,[e("div",{class:u(["relative flex h-40 w-40 items-center justify-center overflow-hidden rounded-full border-2 border-dashed bg-gray-50 text-gray-400",a(t).errors.foto?"border-red-500 bg-red-50":"border-gray-300"])},[g.value?(o(),n("img",{key:0,src:g.value,class:"h-full w-full object-cover",alt:"Preview Foto"},null,8,Q)):(o(),L(a($),{key:1,class:"h-16 w-16 opacity-50"})),e("input",{type:"file",onInput:h,class:"absolute inset-0 cursor-pointer opacity-0",accept:"image/*"},null,32)],2),e("div",q,[s[9]||(s[9]=e("p",{class:"text-sm font-medium text-indigo-600"},"Klik untuk upload foto",-1)),s[10]||(s[10]=e("p",{class:"mt-1 text-xs text-gray-500"},"Format: JPG, PNG. Maks 2MB.",-1)),a(t).errors.foto?(o(),n("p",H,l(a(t).errors.foto),1)):m("",!0)])])]),e("div",W,[s[12]||(s[12]=e("p",{class:"mb-4 text-xs font-medium tracking-wider text-indigo-200 uppercase"},"Preview Tampilan",-1)),e("div",X,[e("div",Y,l(a(t).name?a(t).name.charAt(0).toUpperCase():"G"),1),e("div",null,[e("h4",Z,l(V.value),1),e("p",ee,l(a(t).nip||"NIP Belum diisi"),1)])])])]),e("div",se,[e("div",te,[s[27]||(s[27]=e("div",{class:"border-b border-gray-100 px-6 py-4"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Informasi Pribadi"),e("p",{class:"text-sm text-gray-500"},"Lengkapi data diri guru dengan benar.")],-1)),e("div",ae,[e("div",re,[s[13]||(s[13]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},"Gelar Depan",-1)),d(x,{modelValue:a(t).gelar_depan,"onUpdate:modelValue":s[0]||(s[0]=r=>a(t).gelar_depan=r),type:"text",placeholder:"Contoh: Dr., Ir."},null,8,["modelValue"]),a(t).errors.gelar_depan?(o(),n("p",oe,l(a(t).errors.gelar_depan),1)):m("",!0)]),e("div",le,[s[14]||(s[14]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},"Gelar Belakang",-1)),d(x,{modelValue:a(t).gelar_belakang,"onUpdate:modelValue":s[1]||(s[1]=r=>a(t).gelar_belakang=r),type:"text",placeholder:"Contoh: S.Pd, M.Kom"},null,8,["modelValue"]),a(t).errors.gelar_belakang?(o(),n("p",ne,l(a(t).errors.gelar_belakang),1)):m("",!0)]),e("div",ie,[s[15]||(s[15]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},[p(" Nama Lengkap "),e("span",{class:"text-red-500"},"*")],-1)),d(x,{modelValue:a(t).name,"onUpdate:modelValue":s[2]||(s[2]=r=>a(t).name=r),type:"text",placeholder:"Masukkan nama lengkap tanpa gelar",class:u({"border-red-500 ring-red-200":a(t).errors.name})},null,8,["modelValue","class"]),a(t).errors.name?(o(),n("p",de,l(a(t).errors.name),1)):m("",!0)]),e("div",me,[s[16]||(s[16]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},[p(" NIP / NUPTK "),e("span",{class:"text-red-500"},"*")],-1)),d(x,{modelValue:a(t).nip,"onUpdate:modelValue":s[3]||(s[3]=r=>a(t).nip=r),type:"text",placeholder:"Nomor Induk Pegawai",class:u({"border-red-500 ring-red-200":a(t).errors.nip})},null,8,["modelValue","class"]),a(t).errors.nip?(o(),n("p",ue,l(a(t).errors.nip),1)):m("",!0)]),e("div",pe,[s[18]||(s[18]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},[p(" Jenis Kelamin "),e("span",{class:"text-red-500"},"*")],-1)),c(e("select",{"onUpdate:modelValue":s[4]||(s[4]=r=>a(t).jenis_kelamin=r),class:u(["w-full rounded-lg border bg-neutral-50 px-3 py-2 text-sm transition-all outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100",a(t).errors.jenis_kelamin?"border-red-500 ring-red-200":"border-neutral-200"])},s[17]||(s[17]=[e("option",{value:"",disabled:""},"Pilih Jenis Kelamin",-1),e("option",{value:"L"},"Laki-laki",-1),e("option",{value:"P"},"Perempuan",-1)]),2),[[k,a(t).jenis_kelamin]]),a(t).errors.jenis_kelamin?(o(),n("p",ge,l(a(t).errors.jenis_kelamin),1)):m("",!0)]),e("div",ce,[s[21]||(s[21]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700"},[p(" Keahlian Utama / Mata Pelajaran "),e("span",{class:"text-gray-400 text-xs font-normal"},"(Opsional)")],-1)),e("div",fe,[c(e("select",{"onUpdate:modelValue":s[5]||(s[5]=r=>a(t).matpel_kode=r),class:u(["w-full appearance-none rounded-lg border bg-neutral-50 px-3 py-2 text-sm transition-all outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100",a(t).errors.matpel_kode?"border-red-500 ring-red-200":"border-neutral-200"])},[s[19]||(s[19]=e("option",{value:""},"-- Tidak Memiliki Mapel Khusus --",-1)),(o(!0),n(B,null,S(_.matpels,r=>(o(),n("option",{key:r.kode,value:r.kode},l(r.kode)+" - "+l(r.nama),9,xe))),128))],2),[[k,a(t).matpel_kode]]),s[20]||(s[20]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500"},[e("svg",{class:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1))]),a(t).errors.matpel_kode?(o(),n("p",be,l(a(t).errors.matpel_kode),1)):m("",!0)]),s[26]||(s[26]=e("div",{class:"col-span-full my-2 border-t border-gray-100"},null,-1)),e("div",ke,[s[25]||(s[25]=e("label",{class:"mb-3 block text-sm font-medium text-gray-700"},"Status Kepegawaian",-1)),e("div",ye,[e("label",{class:u(["relative flex w-full cursor-pointer rounded-lg border bg-white p-4 shadow-sm transition-all focus:outline-none md:w-1/2",a(t).status==="Aktif"?"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600":"border-gray-300 hover:border-gray-400"])},[c(e("input",{type:"radio",name:"status",value:"Aktif","onUpdate:modelValue":s[6]||(s[6]=r=>a(t).status=r),class:"sr-only"},null,512),[[y,a(t).status]]),s[23]||(s[23]=e("span",{class:"flex flex-1"},[e("span",{class:"flex flex-col"},[e("span",{class:"block text-sm font-medium text-gray-900"},"Aktif Mengajar"),e("span",{class:"mt-1 flex items-center text-xs text-gray-500"},"Guru aktif dan memiliki jadwal.")])],-1)),a(t).status==="Aktif"?(o(),n("span",ve,s[22]||(s[22]=[e("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5"},[e("circle",{cx:"12",cy:"12",r:"12",fill:"currentColor","fill-opacity":"0.2"}),e("path",{d:"M7 13l3 3 7-7",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):m("",!0)],2),e("label",{class:u(["relative flex w-full cursor-pointer rounded-lg border bg-white p-4 shadow-sm transition-all focus:outline-none md:w-1/2",a(t).status==="Nonaktif"?"border-red-500 bg-red-50 ring-1 ring-red-500":"border-gray-300 hover:border-gray-400"])},[c(e("input",{type:"radio",name:"status",value:"Nonaktif","onUpdate:modelValue":s[7]||(s[7]=r=>a(t).status=r),class:"sr-only"},null,512),[[y,a(t).status]]),s[24]||(s[24]=e("span",{class:"flex flex-1"},[e("span",{class:"flex flex-col"},[e("span",{class:"block text-sm font-medium text-gray-900"},"Non-Aktif / Cuti"),e("span",{class:"mt-1 flex items-center text-xs text-gray-500"},"Tidak memiliki akses ke sistem.")])],-1))],2)])])])])])])]))}});export{Me as default};
