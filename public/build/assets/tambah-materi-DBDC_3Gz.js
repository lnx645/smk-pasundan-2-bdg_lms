import{_ as P,b as i,o,e as t,m as $,r as C,w as L,F as U,j as z,s as I,L as k,d as r,k as p,i as a,ac as F,C as f,p as j,u as E,c as M,ad as S,g as B,t as g,h as A,z as D,n as w,f as H,ae as Y}from"./app-6R2423CB.js";import{_}from"./button.vue_vue_type_script_setup_true_lang-Dz5dKsO2.js";import{_ as y}from"./input.vue_vue_type_script_setup_true_lang-lZDRTLU2.js";import{_ as K}from"./video-player.vue_vue_type_script_setup_true_lang-Z606pwQA.js";import{M as N}from"./MaterialSymbolsAddCircleOutline-B2_zKTdM.js";import{_ as R}from"./page-title.vue_vue_type_script_setup_true_lang-By9Ku7yv.js";import{A as G,a as J,b as O,B as Q,c as q,C as W,d as X,e as Z,E as ee,f as se,S as te,H as ae,I as le,g as oe,h as re,i as ie,j as ne,k as de,l as ue,m as me,n as pe,o as ce,p as be,q as ge,r as ke,L as xe,s as fe,t as _e,u as ve,M as he,v as we,P as ye,w as Ve,x as Ce,T as Ie,y as Me,z as Be,D as Te,F as $e,G as Le,J as Pe,K as Ue,U as ze,N as Fe,O as je,Q as Ee,R as Se,V as Ae,W as De,X as He,Y as Ye,Z as Ke,_ as Ne,$ as Re,a0 as Ge,a1 as Je}from"./ckeditor5-BztYqWsi.js";import{C as T}from"./vue-select.es-6d7oZifc.js";const Oe={name:"IcBaselineMinus"},Qe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function qe(V,d,e,u,n,m){return o(),i("svg",Qe,d[0]||(d[0]=[t("path",{fill:"currentColor",d:"M19 12.998H5v-2h14z"},null,-1)]))}const We=P(Oe,[["render",qe]]),Xe={class:"mt-0"},Ze={class:"flex flex-col py-1 overflow-y-auto pl-1 max-h-[200px] gap-1"},es={class:"flex items-center gap-1 max-w-full w-full"},ss={class:"flex items-center gap-1"},ts=$({__name:"link-materi-input-field",props:["modelValue"],emits:["update:modelValue"],setup(V,{emit:d}){const e=C([{name:"",links:""}]),u=C([1]);let n=1;const m=d;function v(){n++,n>10?f.warning("Hanya bisa menyimpan 10 link materi"):(u.value.push(n),e.value.push({name:"",links:""})),m("update:modelValue",e.value)}function x(s,l){const c=document.getElementById(`file-${s}`);c.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(10px)"}],{duration:250,easing:"ease"}).onfinish=()=>{u.value.splice(l,1),e.value.splice(l,1),n<=1?f.warning("Minimal harus ada 1 file materi"):n--},m("update:modelValue",e.value)}return L(e,()=>{m("update:modelValue",e.value)},{deep:!0}),(s,l)=>(o(),i("div",Xe,[l[0]||(l[0]=t("label",{class:"mb-4 text-sm font-semibold text-neutral-600"},"Link Materi",-1)),t("div",Ze,[(o(!0),i(U,null,z(u.value,(c,b)=>(o(),I(a(F).div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},key:c,id:`file-${c}`,class:"flex items-center gap-3"},{default:k(()=>[t("div",es,[r(y,{type:"text",class:"bg-white rounded-none text-xs max-w-42 min-w-42 ring-1 ring-neutral-400",modelValue:e.value[b].name,"onUpdate:modelValue":h=>e.value[b].name=h,placeholder:"Nama File Materi"},null,8,["modelValue","onUpdate:modelValue"]),r(y,{type:"url",class:"bg-white rounded-none text-xs ring-1 ring-neutral-400",modelValue:e.value[b].links,"onUpdate:modelValue":h=>e.value[b].links=h,placeholder:"Masukkan link materi"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ss,[r(_,{onClick:v},{default:k(()=>[r(N)]),_:1}),u.value.length>1?(o(),I(_,{key:0,class:"bg-red-500",onClick:()=>x(c,b)},{default:k(()=>[r(We)]),_:2},1032,["onClick"])):p("",!0)])]),_:2},1032,["id"]))),128))])]))}}),as={class:"max-w-7xl mx-auto pb-20"},ls={class:"flex flex-col md:flex-row md:items-center justify-between mb-2"},os={class:"flex items-center gap-3"},rs={key:0,class:"flex items-center gap-2"},is={key:1},ns={class:"lg:col-span-4 space-y-4"},ds={class:"bg-white rounded-xl shadow-sm border border-neutral-200 sticky top-6"},us={class:"p-4 space-y-4"},ms={key:0,class:"mt-1 text-xs text-red-500"},ps={key:0,class:"aspect-video rounded-lg bg-black shadow-sm border border-neutral-200"},cs={key:1,class:"aspect-video rounded-lg bg-neutral-100 border border-dashed border-neutral-300 flex flex-col items-center justify-center text-neutral-400 p-4 text-center"},bs={class:"lg:col-span-5 space-y-2"},gs={class:"bg-white rounded-xl shadow-sm border border-neutral-200 p-6 min-h-[500px]"},ks={class:"mb-6"},xs={key:0,class:"mt-1 text-xs text-red-500"},fs={class:"relative"},_s={key:0,class:"mt-1 text-xs text-red-500"},vs={class:"lg:col-span-3 space-y-4"},hs={class:"bg-white rounded-xl shadow-sm border border-neutral-200"},ws={class:"p-4 space-y-5"},ys={key:0,class:"mt-1 text-xs text-red-500"},Vs={key:0,class:"mt-1 text-xs text-red-500"},Us=$({__name:"tambah-materi",setup(V){const d=j(),e=E({title:"",publish_date:"",youtube_id:"",description:"",kelas_ids:d.props.active_kelas,matpel:"",file_materi:[]}),u=M(()=>({licenseKey:"GPL",placeholder:"Tuliskan deskripsi materi, ringkasan, atau instruksi...",height:400,plugins:[G,J,O,Q,q,W,X,Z,ee,se,te,ae,le,oe,re,ie,ne,de,ue,me,pe,ce,be,ge,ke,xe,fe,_e,ve,he,we,ye,Ve,Ce,Ie,Me,Be,Te,$e,Le,Pe,Ue,ze,Fe,je,Ee,Se,Ae,De,He,Ye,Ke,Ne],toolbar:["heading","|","bold","italic","underline","strikethrough","code","|","bulletedList","numberedList","todoList","|","fontSize","fontColor","fontBackgroundColor","|","link","insertImage","insertTable","blockQuote","codeBlock","|","undo","redo"]})),n=M(()=>S(e.youtube_id));async function m(){await e.submit(Y({kelas_kode:d.props.kelas_kode}))}function v(){window.history.back()}return L(()=>[e.hasErrors,e.processing],()=>{e.hasErrors&&!e.errors.success&&!e.processing?f.error("Gagal! Mohon periksa kembali inputan Anda."):e.errors.success&&(f.success(e.errors.success),e.resetAndClearErrors(),e.reset("description","file_materi","kelas_ids","matpel","title","youtube_id"))}),(x,s)=>(o(),i("div",as,[t("div",ls,[r(R,{title:"Buat Materi Baru",subtitle:"Bagikan video pembelajaran dan dokumen pendukung untuk siswa."}),t("div",os,[r(_,{variant:"secondary",class:"bg-white border border-neutral-300 shadow-sm text-neutral-600 hover:bg-neutral-50",onClick:v},{default:k(()=>s[7]||(s[7]=[B(" Batal ",-1)])),_:1,__:[7]}),r(_,{onClick:m,disabled:a(e).processing,class:"shadow-md shadow-blue-500/20"},{default:k(()=>[a(e).processing?(o(),i("span",rs,s[8]||(s[8]=[t("svg",{class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),B(" Terbitkan Materi ",-1)]))):(o(),i("span",is,"Terbitkan Materi"))]),_:1},8,["disabled"])])]),t("form",{onSubmit:H(m,["prevent"]),class:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-start"},[t("div",ns,[t("div",ds,[s[12]||(s[12]=t("div",{class:"bg-neutral-50 rounded-t-xl px-4 py-3 border-b border-neutral-100"},[t("h3",{class:"font-semibold text-neutral-700 text-sm"},"Media Pembelajaran")],-1)),t("div",us,[t("div",null,[s[9]||(s[9]=t("label",{class:"block text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2"},"Youtube Video ID / URL",-1)),r(y,{modelValue:a(e).youtube_id,"onUpdate:modelValue":s[0]||(s[0]=l=>a(e).youtube_id=l),placeholder:"Paste link Youtube...",class:"text-sm"},null,8,["modelValue"]),a(e).errors.youtube_id?(o(),i("p",ms,g(a(e).errors.youtube_id),1)):p("",!0)]),n.value?(o(),i("div",ps,[r(K,{"yt-id":n.value},null,8,["yt-id"])])):(o(),i("div",cs,s[10]||(s[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("span",{class:"text-xs"},"Masukkan ID/Link Youtube untuk preview",-1)]))),t("div",null,[r(ts,{modelValue:a(e).file_materi,"onUpdate:modelValue":s[1]||(s[1]=l=>a(e).file_materi=l)},null,8,["modelValue"]),s[11]||(s[11]=t("p",{class:"text-[10px] text-neutral-400 mt-1 italic"},"*Maksimal 10 link materi",-1))])])])]),t("div",bs,[t("div",gs,[t("div",ks,[s[13]||(s[13]=t("label",{class:"block text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2"},"Judul Materi",-1)),A(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=l=>a(e).title=l),placeholder:"Contoh: Pengenalan Aljabar Linear",class:"w-full text-xl font-bold text-neutral-800 placeholder-neutral-300 border-b-2 border-transparent focus:border-blue-500 focus:outline-none py-2 transition-colors bg-transparent"},null,512),[[D,a(e).title]]),a(e).errors.title?(o(),i("p",xs,g(a(e).errors.title),1)):p("",!0)]),t("div",fs,[s[14]||(s[14]=t("label",{class:"block text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2"},"Deskripsi & Instruksi",-1)),t("div",{class:w(["prose max-w-none ck-content-wrapper",{"ring-1 ring-red-500 rounded-lg":a(e).errors.description}])},[r(a(Ge),{editor:a(Re),modelValue:a(e).description,"onUpdate:modelValue":s[3]||(s[3]=l=>a(e).description=l),config:u.value},null,8,["editor","modelValue","config"])],2),a(e).errors.description?(o(),i("p",_s,g(a(e).errors.description),1)):p("",!0)])])]),t("div",vs,[t("div",hs,[s[20]||(s[20]=t("div",{class:"bg-neutral-50 px-4 py-3 border-b rounded-t-xl border-neutral-100"},[t("h3",{class:"font-semibold text-neutral-700 text-sm"},"Target Distribusi")],-1)),t("div",ws,[t("div",null,[s[15]||(s[15]=t("label",{class:"block text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2"},"Mata Pelajaran",-1)),r(a(T),{placeholder:"Pilih Matpel...",modelValue:a(e).matpel,"onUpdate:modelValue":s[4]||(s[4]=l=>a(e).matpel=l),options:x.$page.props.matpels,reduce:l=>l,label:"nama",class:w(["v-select-custom",{"border-red-500 ring-1 ring-red-500 rounded-lg":a(e).errors.matpel}])},null,8,["modelValue","options","reduce","class"]),a(e).errors.matpel?(o(),i("p",ys,g(a(e).errors.matpel),1)):p("",!0)]),t("div",null,[s[16]||(s[16]=t("label",{class:"block text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2"},"Kelas Tujuan",-1)),r(a(T),{placeholder:"Pilih satu atau lebih...",modelValue:a(e).kelas_ids,"onUpdate:modelValue":s[5]||(s[5]=l=>a(e).kelas_ids=l),options:x.$page.props.kelas,reduce:l=>l.id_kelas,label:"nama_kelas",multiple:!0,class:w(["v-select-custom",{"border-red-500 ring-1 ring-red-500 rounded-lg":a(e).errors.kelas_ids}])},null,8,["modelValue","options","reduce","class"]),a(e).errors.kelas_ids?(o(),i("p",Vs,g(a(e).errors.kelas_ids),1)):p("",!0)]),s[19]||(s[19]=t("hr",{class:"border-dashed border-neutral-200"},null,-1)),t("div",null,[s[17]||(s[17]=t("label",{class:"block text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2"},"Jadwal Publish",-1)),r(a(Je),{modelValue:a(e).publish_date,"onUpdate:modelValue":s[6]||(s[6]=l=>a(e).publish_date=l),"auto-apply":"","enable-time-picker":!0,placeholder:"Sekarang (Langsung)","input-class-name":"dp-custom-input"},null,8,["modelValue"]),s[18]||(s[18]=t("p",{class:"text-[10px] text-neutral-400 mt-1"},"Kosongkan untuk publish sekarang.",-1))])])])])],32)]))}});export{Us as default};
